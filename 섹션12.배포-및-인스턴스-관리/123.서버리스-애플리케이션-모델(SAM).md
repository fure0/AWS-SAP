# 🐿️ AWS SAM (Serverless Application Model) 핵심 정리

AWS SAM은 **서버리스 애플리케이션을 구축하고 배포하기 위한 오픈소스 프레임워크**입니다. 개발자가 서버리스 리소스를 더 쉽고 빠르게 정의할 수 있도록 돕습니다.

## 1. SAM의 주요 특징

* **코드형 인프라 (IaC):** 코드는 **YAML** 형식을 사용합니다.
* **지원 리소스:** Lambda 함수뿐만 아니라 DynamoDB, API Gateway, Step Functions 상태 머신 등을 생성할 수 있습니다.
* **로컬 개발 및 테스트:** Lambda, API Gateway 등을 **로컬 환경에서 실행**할 수 있어 개발 주기를 단축시킵니다.
* **CloudFormation 기반:** SAM은 내부적으로 CloudFormation을 사용합니다. SAM 템플릿이 배포될 때 CloudFormation 구문으로 변환(Transform)되어 실행됩니다.

## 2. 배포 및 트래픽 제어 (핵심!)

SAM은 단순한 배포를 넘어, 안전한 배포 전략을 제공합니다.

* **CodeDeploy 활용:** 새로운 Lambda 함수 버전을 배포할 때 **CodeDeploy**를 호출합니다.
* **트래픽 이동 (Traffic Shifting):** 기존 버전(v1)과 새 버전(v2) 사이의 트래픽을 점진적으로 이동시키는 기능을 제공합니다. (예: Canary, Linear 배포)

---

## 3. SA 프로페셔널 관점의 CI/CD 아키텍처

솔루션 아키텍트(SA) 시험에서 중요한 SAM 기반의 파이프라인 흐름은 다음과 같습니다.

| 단계 | 도구 | 역할 |
| --- | --- | --- |
| **Source** | **CodeCommit** | 작성된 SAM 코드(YAML) 및 소스 코드를 저장 |
| **Build** | **CodeBuild** | 코드 빌드, 테스트, 아티팩트 패키징 수행 |
| **Orchestration** | **CodePipeline** | 전체 프로세스(빌드~배포)를 자동화 및 관리 |
| **Deploy (Infra)** | **CloudFormation** | SAM 템플릿을 해석하여 인프라 생성/업데이트 |
| **Deploy (Traffic)** | **CodeDeploy** | Lambda 함수 배포 시 신/구 버전 간 트래픽 이동 관리 |

---

## 💡 시험 대비 포인트 (Summary)

> **"SAM은 Lambda 배포 시 내부적으로 CodeDeploy를 사용하여 트래픽을 이동시킨다"**는 점을 반드시 기억하세요. 또한, SAM이 CloudFormation의 확장판 개념이라는 점과 API Gateway, DynamoDB와의 유기적인 결합도 중요한 빈출 포인트입니다.
