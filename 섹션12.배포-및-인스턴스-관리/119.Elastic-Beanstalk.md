## ## 1. Elastic Beanstalk 개요

Elastic Beanstalk는 개발자가 애플리케이션을 AWS에 빠르게 배포할 수 있도록 돕는 **개발자 중심의 관리형 서비스**입니다.

* **래퍼(Wrapper) 역할:** EC2, ASG, ELB, RDS 등 기존 AWS 구성 요소를 감싸서 하나의 단위로 관리합니다.
* **리플랫폼(Re-platform) 전략:** 온프레미스 애플리케이션을 최소한의 코드 수정으로 AWS 네이티브 환경으로 옮길 때 매우 유용합니다.
* **비용:** 서비스 자체는 **무료**이며, 사용한 하부 리소스(EC2, RDS 등)에 대해서만 비용을 지불합니다.
* **책임 모델:** 사용자는 **애플리케이션 코드**만 책임지며, OS 및 인스턴스 구성, 패치 등은 AWS가 관리합니다.

---

## ## 2. 지원 플랫폼 (Runtime)

다양한 런타임을 지원하며, 지원되지 않는 환경은 도커를 통해 해결할 수 있습니다.

| 분류 | 지원 플랫폼 |
| --- | --- |
| **주요 언어** | Go, Java, Node.js, PHP, Python, Ruby, .NET (Windows Server) |
| **WAS** | **Java Tomcat** (온프레미스 마이그레이션 시 중요) |
| **기타** | Packer, 단일/다중/사전 구성된 **Docker** |

---

## ## 3. 아키텍처 모델 (3가지)

용도에 따라 Beanstalk는 세 가지 주요 아키텍처를 제공합니다.

### **① 단일 인스턴스 (Single Instance)**

* **구성:** 1개의 AZ 내에 1개의 EC2 + Elastic IP(EIP).
* **특징:** 업데이트 시 인스턴스가 교체되어도 EIP를 통해 연결을 유지합니다.
* **용도:** 저비용이 중요한 **개발 및 테스트 환경**.

### **② 로드 밸런싱 + ASG (High Availability)**

* **구성:** ALB(로드 밸런서) + 다중 AZ 기반의 Auto Scaling Group + RDS(Multi-AZ).
* **특징:** 트래픽에 따라 인스턴스 수가 조절되며 고가용성을 보장합니다.
* **용도:** **운영(Production)** 및 사전 운영 웹 애플리케이션.

### **③ 작업자 환경 (Worker Tier)**

* **구성:** SQS 큐 + Auto Scaling Group(EC2).
* **특징:** SQS 메시지 양에 따라 스케일링됩니다. `cron.yaml`을 사용해 주기적인 작업 수행이 가능합니다.
* **용도:** 비동기 처리, 시간이 오래 걸리는 작업(비디오 인코딩, 이미지 필터링, 압축 파일 생성 등).

---

## ## 4. 웹 티어와 작업자 티어의 디커플링 (Decoupling)

애플리케이션의 효율성을 위해 무거운 작업은 별도의 계층으로 분리하는 것이 권장됩니다.

* **구조:** 웹 계층(ALB+ASG)에서 시간이 걸리는 작업을 **SQS 큐**에 삽입 → 작업자 계층(Worker ASG)에서 이를 가져와 처리.
* **장점:** 웹 서버의 CPU/스레드 부하를 방지하여 사용자 응답성을 높입니다.

---

## ## 5. 배포 전략: 블루/그린 (Blue/Green)

Beanstalk는 직접적인 메뉴 외에도 Route 53 연동을 통해 **제로 다운타임** 배포를 지원합니다.

* **방식 1: URL Swap** (Beanstalk 자체 기능)
* 새 환경(Green) 생성 후 기존 환경(Blue)과 CNAME(URL)을 교체하여 한 번에 트래픽을 전환합니다.


* **방식 2: Route 53 가중치 기반 라우팅**
* 새 환경으로 트래픽의 일부(예: 10%)만 먼저 보내 검증한 뒤, 점진적으로 100%까지 늘리는 방식입니다.



---

> **💡 요약: SAP 시험 포인트**
> 1. 온프레미스 톰캣/도커 앱을 클라우드로 옮길 때 **리플랫폼(Re-platform)** 수단으로 고려할 것.
> 2. 시간이 오래 걸리는 작업은 **SQS + Worker Tier** 조합으로 **디커플링**할 것.
> 3. 무중단 배포가 필요할 경우 **Blue/Green(Route 53 가중치 라우팅)**을 활용할 것.