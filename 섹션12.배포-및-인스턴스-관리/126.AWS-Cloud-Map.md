## βοΈ AWS Cloud Map ν•µμ‹¬ μ •λ¦¬

**Cloud Map**μ€ ν΄λΌμ°λ“ λ¦¬μ†μ¤μ μ„μΉλ¥Ό λ“±λ΅ν•κ³  λ™μ μΌλ΅ μ°Ύμ•„λ‚Ό μ μκ² ν•΄μ£Όλ” **μ™„μ „ κ΄€λ¦¬ν• μ„λΉ„μ¤ νƒμƒ‰(Service Discovery) μ„λΉ„μ¤**μ…λ‹λ‹¤.

### 1. Cloud Mapμ΄ ν•„μ”ν• μ΄μ  (κΈ°μ΅΄ λ°©μ‹μ λ¬Έμ μ )

Cloud Map κ°™μ€ μ„λΉ„μ¤ νƒμƒ‰ λ„κµ¬κ°€ μ—†λ‹¤λ©΄, λ§μ΄ν¬λ΅μ„λΉ„μ¤ ν™κ²½μ—μ„ λ¦¬μ†μ¤ λ³€κ²½ μ‹ λ²κ±°λ΅μ΄ μ‘μ—…μ΄ λ°μƒν•©λ‹λ‹¤.

* **μλ™ μ—…λ°μ΄νΈ:** λ°±μ—”λ“ μ„λΉ„μ¤κ°€ `v1`μ—μ„ `v2`λ΅ μ—…λ°μ΄νΈλ  λ•, ν”„λ΅ νΈμ—”λ“ μ½”λ“ λ‚΄μ μ—”λ“ν¬μΈνΈ μ£Όμ†λ¥Ό μ§μ ‘ μμ •ν•΄μ•Ό ν•©λ‹λ‹¤.
* **μ¬λ°°ν¬μ λ¶νΈν•¨:** μ£Όμ† λ³€κ²½μ„ μ μ©ν•κΈ° μ„ν•΄ ν”„λ΅ νΈμ—”λ“ μ„λΉ„μ¤λ¥Ό λ§¤λ² λ‹¤μ‹ λΉλ“ν•κ³  μ¬λ°°ν¬ν•΄μ•Ό ν•λ” λΉ„ν¨μ¨μ΄ λ°μƒν•©λ‹λ‹¤.
* **μ μ—°μ„± λ¶€μ΅±:** λ™μ μΌλ΅ λ³€ν•λ” ν΄λΌμ°λ“ ν™κ²½μ—μ„ κ³ μ •λ(Hard-coded) μ£Όμ† λ°©μ‹μ€ ν™•μ¥μ΄ μ–΄λ µμµλ‹λ‹¤.

---

### 2. Cloud Mapμ μ‘λ™ μ›λ¦¬

Cloud Mapμ„ λ„μ…ν•λ©΄ μ¤‘κ°„μ—μ„ λ¦¬μ†μ¤μ μ„μΉλ¥Ό κ΄€λ¦¬ν•΄μ£Όλ” 'μ§€λ„' μ—­ν• μ„ μν–‰ν•©λ‹λ‹¤.

1. **λ¦¬μ†μ¤ λ“±λ΅:** λ°±μ—”λ“ μ„λΉ„μ¤(v1, v2 λ“±)μ μ„μΉ(IP, ν¬νΈ λ“±), μ†μ„±, μƒνƒ μ •λ³΄(Health)λ¥Ό Cloud Mapμ— λ“±λ΅ν•©λ‹λ‹¤.
2. **μΏΌλ¦¬(μ΅°ν):** ν”„λ΅ νΈμ—”λ“ μ„λΉ„μ¤λ” λ°±μ—”λ“μ μ‹¤μ  μ£Όμ†λ¥Ό μ§μ ‘ μ•„λ” λ€μ‹ , Cloud Mapμ— "λ°±μ—”λ“ μ„λΉ„μ¤ μ–΄λ”” μμ–΄?"λΌκ³  μΏΌλ¦¬λ¥Ό λ³΄λƒ…λ‹λ‹¤.
3. **μ‘λ‹µ λ° μ—°κ²°:** Cloud Mapμ΄ ν„μ¬ μ‚¬μ© κ°€λ¥ν• λ°±μ—”λ“ μ£Όμ†λ¥Ό μ•λ ¤μ£Όλ©΄, ν”„λ΅ νΈμ—”λ“λ” ν•΄λ‹Ή μ£Όμ†λ΅ μ—°κ²°ν•©λ‹λ‹¤.
4. **λ™μ  μ—…λ°μ΄νΈ:** λ°±μ—”λ“κ°€ `v2`λ΅ μ—…κ·Έλ μ΄λ“λλ©΄, **Cloud Mapμ APIλ¥Ό νΈμ¶ν•μ—¬ μ—”λ“ν¬μΈνΈ μ •λ³΄λ§ μ—…λ°μ΄νΈ**ν•©λ‹λ‹¤. ν”„λ΅ νΈμ—”λ“λ” λ‹¤μ μΏΌλ¦¬ μ‹ μλ™μΌλ΅ μƒλ΅μ΄ `v2` μ£Όμ†λ¥Ό λ°›μ•„μ¤κ² λ©λ‹λ‹¤.

> **π’΅ ν•µμ‹¬ μ°¨μ΄μ :** ν”„λ΅ νΈμ—”λ“μ **μ½”λ“ λ³€κ²½μ΄λ‚ μ¬λ°°ν¬ μ—†μ΄** λ°±μ—”λ“ μ—°κ²° μ •λ³΄λ¥Ό λ™μ μΌλ΅ λ°”κΏ€ μ μμµλ‹λ‹¤.

---

### 3. μ£Όμ” νΉμ§• λ° κΈ°λ¥

| νΉμ§• | μ„¤λ… |
| --- | --- |
| **μƒνƒ ν™•μΈ (Health Check)** | λ¦¬μ†μ¤μ μƒνƒλ¥Ό μ£ΌκΈ°μ μΌλ΅ ν™•μΈν•μ—¬, **λΉ„μ •μƒ(Unhealthy)μΈ μ—”λ“ν¬μΈνΈλ΅λ” νΈλν”½μ„ λ³΄λ‚΄μ§€ μ•λ„λ΅** ν•„ν„°λ§ν•©λ‹λ‹¤. |
| **λ‹¤μ–‘ν• μ ‘κ·Ό λ°©μ‹** | **SDK, API, λλ” DNS**λ¥Ό ν†µν•΄ μ„λΉ„μ¤ μ„μΉλ¥Ό μ΅°νν•  μ μμµλ‹λ‹¤. |
| **Route 53 μ—°λ™** | Route 53μ™€ λ°€μ ‘ν•κ² κ²°ν•©λμ–΄ μμ–΄, DNS κΈ°λ°μ μ„λΉ„μ¤ νƒμƒ‰μ„ μ‰½κ² κµ¬μ„±ν•  μ μμµλ‹λ‹¤. |
| **μ†μ„± κΈ°λ° ν•„ν„°λ§** | λ‹¨μν μ£Όμ†λ§ μ°Ύλ” κ²ƒμ΄ μ•„λ‹λΌ, νΉμ • μ†μ„±(μ: 'λ°°ν¬ λ‹¨κ³„: ν…μ¤νΈ')μ„ κ°€μ§„ λ¦¬μ†μ¤λ¥Ό κ³¨λΌ μ°Ύμ„ μ μμµλ‹λ‹¤. |

---

### 4. μ‹ν— λ€λΉ„ μ”μ•½ (Key Takeaways)

* Cloud Mapμ€ **μ™„μ „ κ΄€λ¦¬ν• λ¦¬μ†μ¤ νƒμƒ‰ μ„λΉ„μ¤**μ΄λ‹¤.
* μ• ν”λ¦¬μΌ€μ΄μ…μ **μ½”λ“ λ³€κ²½ μ—†μ΄** λ™μ μΌλ΅ μ„λΉ„μ¤ μ—”λ“ν¬μΈνΈλ¥Ό μ—…λ°μ΄νΈν•  μ μκ² ν•΄μ¤€λ‹¤.
* **μƒνƒ ν™•μΈ(Health Check)** κΈ°λ¥μ΄ λ‚΄μ¥λμ–΄ μμ–΄ κ°€μ©μ„±μ΄ λ†’λ‹¤.
* **API κΈ°λ°**λΏλ§ μ•„λ‹λΌ **Route 53μ™€ μ—°λ™λ DNS κΈ°λ°** νƒμƒ‰λ„ μ§€μ›ν•λ‹¤.