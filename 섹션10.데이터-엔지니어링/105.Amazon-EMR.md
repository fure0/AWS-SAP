## 💡 Amazon EMR 개요

**EMR(Elastic MapReduce)**은 AWS 클라우드에서 빅데이터 처리를 위한 **관리형 하둡(Hadoop) 프레임워크** 서비스입니다.

* **용도:** 방대한 양의 데이터를 분산 처리 (Apache Spark, HBase, Presto, Flink 등 활용).
* **주요 특징:**
  * **탄력성:** 수백 개의 EC2 인스턴스로 클러스터 구성 가능.
  * **비용 효율성:** 작업 완료 후 클러스터를 즉시 종료하여 비용 절감.
  * **자동화:** 하둡 클러스터의 복잡한 프로비저닝 및 구성을 자동 수행.
  * **유스케이스:** 데이터 처리, 머신러닝, 웹 인덱싱, 로그 분석 등.



---

## 🏗️ EMR 아키텍처 및 스토리지 통합

EMR은 성능과 비용 최적화를 위해 다양한 AWS 서비스와 통합됩니다.

### 1. 네트워크 및 가용성

* **VPC 내 실행:** 보안을 위해 VPC 내부에서 기동됩니다.
* **Single AZ:** 일반적으로 노드 간 **낮은 네트워크 지연 시간과 비용 절감**을 위해 단일 가용영역(AZ) 내에 배치됩니다. (AZ 장애 시 데이터 손실 위험 존재)

### 2. 스토리지 옵션

* **HDFS (Hadoop Distributed File System):**
  * 각 EC2의 **EBS 볼륨**을 사용.
  * 데이터 처리를 위한 고성능 **임시 저장소**.


* **EMRFS (EMR File System):**
  * **S3와 직접 통합**하여 데이터를 읽고 씁니다.
  * **영구적 저장**이 필요하거나 Multi-AZ 수준의 내구성이 필요한 경우 필수.
  * 서버 측 암호화(SSE) 지원.


* **DynamoDB 통합:**
  * **Apache Hive** 모듈을 사용하여 DynamoDB 테이블의 데이터를 직접 읽고 분석할 수 있습니다.



---

## 💰 노드 구성 및 비용 최적화 (중요)

EMR 클러스터는 역할에 따라 세 가지 노드 타입으로 나뉩니다.

| 노드 타입 | 역할 | 실행 특성 | 추천 구매 옵션 |
| --- | --- | --- | --- |
| **Master Node** | 클러스터 관리 및 상태 조정 | 상시 실행 필요 | On-demand 또는 **Reserved (RI)** |
| **Core Node** | 태스크 실행 및 **HDFS 데이터 저장** | 상시 실행 필요 | On-demand 또는 **Reserved (RI)** |
| **Task Node** | (선택사항) 데이터 저장 없이 계산만 수행 | 필요 시 추가/삭제 가능 | **Spot Instance** (비용 극대화) |

> **Tip:** 코어 노드는 데이터를 저장하므로 중간에 종료되면 위험하지만, 태스크 노드는 데이터 저장 없이 계산만 하므로 스팟 인스턴스를 활용하기에 최적입니다.

---

## ⚙️ 인스턴스 배포 및 구성 방식

EMR 클러스터를 구성할 때 두 가지 모델 중 선택할 수 있습니다.

### 1. 인스턴스 그룹 (Instance Groups)

* **특징:** 각 노드 유형별로 **단일 인스턴스 타입**과 구매 옵션을 선택.
* **장점:** **CloudWatch 기반 자동 확장(Auto-scaling)** 기능을 사용할 수 있어 유연합니다.
* **예시:** 마스터(m5.xlarge, On-demand), 태스크(c4.xlarge, Spot).

### 2. 인스턴스 플릿 (Instance Fleets)

* **특징:** 목표 용량을 설정하고 **여러 인스턴스 타입과 구매 옵션을 혼합**하여 사용.
* **장점:** 가용성이 높은 스팟 인스턴스 풀을 활용하기 좋으며, AWS가 최적의 조합으로 프로비저닝합니다.
* **단점:** 현재 기준으로 자동 조정(Auto-scaling) 기능은 지원하지 않습니다.

---

**추가 학습 가이드:**
시험에서는 **"데이터를 영구적으로 보관해야 하는가(S3/EMRFS)"**와 **"어떤 노드에 스팟 인스턴스를 적용하여 비용을 아낄 것인가(Task Node)"**가 단골 주제입니다.