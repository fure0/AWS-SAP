## 1. Kinesis 데이터 파이프라인 아키텍처

실시간 데이터 수집부터 분석, 저장까지의 흐름을 구성하는 다양한 옵션입니다.

* **생산자 (Producers):** KPL(Kinesis Producer Library), Kinesis Agent 등을 통해 데이터를 생성합니다.
* **분석 (Analysis):** * **Kinesis Data Analytics:** 실시간 SQL 분석 수행. Lambda를 호출해 데이터 변환이 가능합니다.
* **EC2:** Data Streams에서 직접 데이터를 읽어 사용자 지정 로직으로 처리할 때 사용합니다.


* **전송 및 저장 (Delivery & Storage):**
* **Kinesis Data Firehose (KDF):** 분석된 결과나 원본 데이터를 S3, Redshift, ElasticSearch(OpenSearch) 등으로 전송합니다.
* **특이사항:** KDF는 Kinesis Data Streams뿐만 아니라 KPL/Agent로부터 **직접** 데이터를 받을 수도 있습니다.



---

## 2. 비용 효율성 비교: Kinesis vs DynamoDB

**조건:** 초당 1KB 메시지 3,000개 수신 (초당 3MB 데이터 처리)

| 비교 항목 | 옵션 1: Kinesis Data Streams | 옵션 2: DynamoDB + Streams |
| --- | --- | --- |
| **구성** | KDS + Lambda + KDF(장기보관용) | DynamoDB + Lambda |
| **필요 용량** | 샤드 3개 (샤드당 1MB/s 처리) | 3,000 WCU (Write Capacity Unit) |
| **월 예상 비용** | **약 $32** | **약 $1,450** |
| **데이터 보존** | 기본 1~7일 (KDF를 통해 S3 저장을 권장) | 무한 보관 가능 (변경 가능 데이터) |
| **결론** | **비용 면에서 약 50배 저렴함.** 단순 스트리밍 목적이라면 Kinesis가 압도적으로 유리합니다. | 데이터베이스로서의 기능과 장기 저장이 동시에 필요할 때 사용합니다. |

---

## 3. AWS 데이터 교환 기술 서비스별 상세 비교

솔루션 아키텍트로서 각 서비스의 특성을 파악하여 적합한 도구를 선택하는 것이 핵심입니다.

### **실시간 스트리밍 및 메시징**

| 서비스 | 데이터 보존 | 순서 보장 | 확장성 | 리더(Consumer) | 지연 시간 |
| --- | --- | --- | --- | --- | --- |
| **KDS** | 1~7일 | 샤드 단위 보장 | 샤드 프로비저닝 | EC2, Lambda, KCL, KDF | ~200ms |
| **KDF** | 보존 안 함 | 없음 | 자동 확장 | S3, Redshift, OpenSearch | 준실시간(최소 1분 버퍼) |
| **SQS (표준)** | 1~14일 | 없음 | 무한 (소프트 제한) | EC2, Lambda | 10~100ms |
| **SQS FIFO** | 1~14일 | 보장 (Group ID) | 300~3,000 TPS | EC2, Lambda | 10~100ms |
| **SNS** | 보존 안 함 | 없음 | 무한 (소프트 제한) | HTTP, Lambda, SQS, Email | 10~100ms |

### **데이터베이스 및 스토리지**

| 서비스 | 데이터 특성 | 보존 기간 | 확장성 방식 | 지연 시간 |
| --- | --- | --- | --- | --- |
| **DynamoDB** | **변경 가능** | 무한 (TTL 가능) | WCU/RCU (온디맨드 가능) | 10~100ms |
| **S3** | **변경 가능** (버저닝) | 무한 (수명 주기) | 접두사당 PUT 3,500 / GET 5,500 | 10~100ms |

---

## 4. 핵심 요약 (Architect's Tip)

1. **Kinesis vs SQS:** 실시간 대용량 로그/이벤트 스트리밍에는 Kinesis를, 애플리케이션 간의 작업 분리(Decoupling)와 메시지 큐잉에는 SQS를 선택하세요.
2. **데이터 순서:** 순서가 중요하다면 Kinesis(샤드 단위) 또는 SQS FIFO를 사용해야 합니다.
3. **비용:** 단순히 데이터를 어딘가로 흘려보내는 용도라면 DynamoDB는 매우 비싼 선택지입니다. Kinesis를 우선 고려하세요.
4. **보존:** Kinesis는 일시적입니다. 영구 저장이 필요하면 반드시 Kinesis Data Firehose를 통해 S3로 내보내는 아키텍처를 설계해야 합니다.