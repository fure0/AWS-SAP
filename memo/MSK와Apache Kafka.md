## MSK 가 Apache Kafka 를 AWS에서 지원하는 서비스인데 애초에 Apache Kafka 가 뭐야?

AWS MSK(Managed Streaming for Apache Kafka)를 이해하기 위해 그 뿌리인 **Apache Kafka**를 한마디로 정의하자면, **"대용량의 실시간 데이터를 빠르고 안전하게 옮겨주는 거대한 디지털 우편물 물류 센터"**라고 할 수 있습니다.

단순히 메시지를 전달하는 것을 넘어, 한꺼번에 몰려드는 수조 개의 데이터를 분산해서 저장하고, 필요한 곳에 실시간으로 뿌려주는 **분산 이벤트 스트리밍 플랫폼**입니다.

---

### 1. 카프카의 핵심 구조 (도서관 비유)

카프카를 이해할 때 가장 중요한 4가지 개념을 비유와 함께 설명해 드릴게요.

* **Producer (발행자):** 정보를 만들어내는 주체입니다. (예: 클릭 로그를 만드는 웹사이트, 위치 정보를 보내는 택시 앱)
* **Consumer (구독자):** 정보를 가져가서 사용하는 주체입니다. (예: 데이터를 분석하는 대시보드, 로그를 저장하는 데이터베이스)
* **Topic (주제/카테고리):** 데이터가 저장되는 **'방'**이나 **'게시판'** 같은 개념입니다. "주문 데이터", "클릭 로그"처럼 이름을 붙여 관리합니다.
* **Broker (서버):** 카프카 그 자체입니다. 데이터를 실제로 저장하고 전달하는 서버들을 말하며, 보통 여러 대가 모여 하나의 **Cluster(클러스터)**를 이룹니다.

---

### 2. 왜 다들 카프카를 쓸까? (기존 방식과의 차이)

예전에는 시스템 A와 B가 통신할 때 직접 연결(Point-to-Point)했습니다. 하지만 서비스가 커지면 연결선이 복잡해져서 "스파게티"처럼 꼬이게 되죠. 카프카는 이 문제를 다음과 같이 해결합니다.

| 특징 | 설명 |
| --- | --- |
| **중앙 집중화** | 모든 데이터는 카프카로 모이고, 필요한 곳에서만 가져가면 됩니다. 연결이 단순해집니다. |
| **영구 저장** | 일반적인 메시지 큐(RabbitMQ 등)는 데이터를 전달하면 삭제하지만, 카프카는 설정한 기간 동안 **디스크에 저장**합니다. 덕분에 문제가 생겨도 과거 데이터를 다시 읽을 수 있습니다. |
| **엄청난 속도** | 초당 수백만 건의 데이터를 처리할 수 있을 만큼 빠릅니다. (순차적 디스크 I/O 활용) |
| **확장성** | 데이터가 너무 많아지면 서버(Broker)를 한 대씩 추가하기만 하면 됩니다. (Scale-out) |

---

### 3. 실생활 활용 사례

* **넷플릭스:** 사용자가 어떤 영화를 클릭하고 어디서 멈췄는지 등의 모든 로그를 카프카로 보내 실시간 추천 알고리즘에 활용합니다.
* **배달 앱:** 라이더의 현재 위치 정보를 실시간으로 수집해 사용자 화면에 뿌려줄 때 카프카가 중간에서 이 방대한 위치 데이터를 처리합니다.
* **금융권:** 이상 거래 탐지(FDS)를 위해 모든 결제 내역을 실시간으로 분석 시스템에 전달합니다.

---

### 4. 그럼 MSK는 뭔가요?

카프카는 정말 강력하지만, 직접 설치하고 운영하기가 **매우 까다롭습니다.** 서버 설정, 보안, 업데이트, 장애 대응 등을 다 직접 해야 하거든요.

**AWS MSK**는 이 복잡한 카프카를 클릭 몇 번으로 생성하고, 관리는 AWS가 대신 해주는 **"관리형 서비스"**입니다. 인프라 걱정 없이 카프카의 기능만 쏙 골라 쓰고 싶을 때 사용합니다.

혹시 지금 진행 중인 프로젝트에서 MSK 도입을 고민 중이신가요? 구체적인 상황을 알려주시면 더 맞춤형으로 설명해 드릴 수 있습니다.