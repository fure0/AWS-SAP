# EventBridge와 API Gateway를 사용한 Lambda 호출 전략 차이

EventBridge와 API Gateway는 **Lambda를 호출하는 목적과 트래픽 성격이 완전히 다를 때** 선택이 갈립니다. 아래에서 **호출 전략 관점**으로 정리해볼게요.

---

## 한눈에 요약

| 구분     | EventBridge → Lambda  | API Gateway → Lambda |
| ------ | --------------------- | -------------------- |
| 호출 성격  | 이벤트 기반 (비동기)          | 요청/응답 기반 (동기)        |
| 트리거 주체 | AWS 서비스, 스케줄, 시스템 이벤트 | 사용자, 클라이언트, 외부 시스템   |
| 응답 반환  | 없음 (Fire-and-Forget)  | 있음 (HTTP Response)   |
| 재시도    | 자동 재시도 지원             | 기본적으로 없음             |
| 결합도    | 낮음 (느슨한 결합)           | 높음 (강한 결합)           |
| 주요 용도  | 시스템 간 연동, 배치, 이벤트 처리  | API 제공, 웹/모바일 백엔드    |

---

## 1. EventBridge → Lambda 호출 전략

### 핵심 개념

* **“무언가 발생했다”** 를 중심으로 Lambda를 실행
* 호출자는 결과를 기다리지 않음 (비동기)

### 주요 특징

* **비동기 호출**
* 이벤트 기반 아키텍처 (EDA)
* 자동 재시도 (기본 24시간, 점진적 백오프)
* 여러 타깃으로 **팬아웃(fan-out)** 가능

### 대표 사용 사례

* S3 업로드 후 처리
* 특정 시간에 배치 실행 (cron)
* 서비스 간 상태 변경 알림
* 마이크로서비스 간 이벤트 전달

### 예시 흐름

```
Order 생성 이벤트 발생
→ EventBridge Rule 매칭
→ Lambda A, Lambda B, Step Functions 동시 실행
```

### 장점

* 서비스 간 **결합도가 매우 낮음**
* 확장성과 장애 격리에 유리
* 이벤트 추가 시 기존 로직 수정 불필요

### 단점

* 호출 결과를 즉시 알 수 없음
* 디버깅이 API 호출보다 어려움
* 실시간 사용자 응답에는 부적합

---

## 2. API Gateway → Lambda 호출 전략

### 핵심 개념

* **“요청을 보내고 응답을 받는다”**
* HTTP API 엔드포인트 제공

### 주요 특징

* **동기 호출**
* REST / HTTP / WebSocket 지원
* 인증·인가, 스로틀링, CORS 등 API 기능 내장

### 대표 사용 사례

* 웹/모바일 백엔드 API
* 외부 시스템 연동 API
* 관리 화면, BFF(Backend for Frontend)

### 예시 흐름

```
Client 요청
→ API Gateway
→ Lambda
→ 결과를 HTTP Response로 반환
```

### 장점

* 직관적인 요청/응답 모델
* 사용자 인터랙션에 최적
* 인증·보안·트래픽 제어가 쉬움

### 단점

* 호출자와 Lambda가 강하게 결합
* 대량 이벤트 처리에는 비용/성능 비효율
* 응답 지연 시 사용자 체감 영향 큼

---

## 3. 설계 관점에서의 선택 기준

### EventBridge를 선택해야 할 때

* ✅ **비동기 처리**
* ✅ 호출 결과가 즉시 필요 없음
* ✅ 서비스 간 느슨한 결합이 중요
* ✅ 이벤트 소싱 / 마이크로서비스
* ✅ 스케줄·시스템 이벤트 중심

### API Gateway를 선택해야 할 때

* ✅ **사용자 요청에 대한 응답이 필요**
* ✅ REST/HTTP API 제공
* ✅ 인증·인가·쿼터 관리 필요
* ✅ 외부 공개 API

---

## 4. 함께 쓰는 패턴 (실무에서 매우 흔함)

```text
Client
  ↓
API Gateway
  ↓
Lambda (Command 처리)
  ↓
EventBridge (Event 발행)
  ↓
Lambda / SQS / Step Functions
```

* **Command (명령)**: API Gateway
* **Event (사건)**: EventBridge

👉 CQRS / 이벤트 기반 아키텍처에서 자주 쓰이는 구조

---

## 5. 한 줄 정리

* **API Gateway → Lambda**
  → “요청에 대한 답이 필요할 때”

* **EventBridge → Lambda**
  → “무언가 일어났다는 사실을 전파할 때”

원하시면

* 실제 AWS 아키텍처 예시
* 비용 비교
* 대규모 트래픽 기준 추천 패턴
  도 이어서 설명해드릴게요.
