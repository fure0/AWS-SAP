# (Amazon) MQ 가 뭐지? 큐 서비스면 SQS 쓰면 되는거 아냐?

단순히 **"메시지 큐(Message Queue)"** 기능만 필요하다면 보통은 SQS를 먼저 떠올리는 게 정답입니다. 하지만 Amazon MQ는 SQS가 채워주지 못하는 **'특수 상황'**을 위해 존재합니다.

쉽게 비유하자면, **SQS는 '클라우드 전용 배달 시스템'**이고, **Amazon MQ는 '기존에 쓰던 트럭과 물류 창고를 클라우드로 그대로 옮겨온 것'**이라고 보시면 됩니다.

---

### 1. Amazon MQ vs SQS: 결정적인 차이점

| 구분 | Amazon MQ | Amazon SQS |
| --- | --- | --- |
| **정체성** | 오픈소스 브로커(ActiveMQ, RabbitMQ)의 **관리형 서비스** | AWS 전용 **클라우드 네이티브** 큐 서비스 |
| **주요 목적** | **기존 시스템의 마이그레이션** | 신규 서비스, 서버리스, MSA 구축 |
| **프로토콜** | AMQP, MQTT, STOMP, JMS 등 **표준 프로토콜** 지원 | HTTP(S) API 기반 (전용 SDK 필요) |
| **스케일링** | 인스턴스 성능에 종속됨 (수동/예약 스케일링) | **무한에 가까운 자동 스케일링** |
| **비용** | 브로커 실행 시간 + 스토리지 (사용 안 해도 비용 발생) | 메시지 요청 건당 과금 (사용한 만큼만) |

---

### 2. 그럼 왜 굳이 Amazon MQ를 쓰나요?

SQS가 더 싸고 확장이 잘 되는데도 MQ를 쓰는 이유는 보통 **"호환성"** 때문입니다.

* **"코드 고치기 싫어요 (Migration)"**: 온프레미스(자체 서버)에서 RabbitMQ나 ActiveMQ를 쓰고 있었다면, 소스 코드를 거의 수정하지 않고 엔드포인트만 바꿔서 바로 클라우드로 옮길 수 있습니다. SQS로 옮기려면 AWS SDK를 써서 코드를 새로 짜야 하거든요.
* **"특수한 기능이 필요해요"**: SQS는 단순한 큐지만, MQ(ActiveMQ/RabbitMQ)는 **메시지 그룹화, 복잡한 라우팅, 가상 목적지** 같은 고급 기능을 제공합니다.
* **"표준 프로토콜이 필수예요"**: 사물인터넷(IoT) 장비가 MQTT를 써야 하거나, 오래된 레거시 시스템이 JMS 표준을 따라야 할 때 Amazon MQ가 해결책이 됩니다.

---

### 3. 요약하자면

* **SQS를 쓰세요:** 클라우드에서 새로 만드는 앱(Serverless, Lambda 등)이거나, 비용 효율과 무한 확장이 중요하다면 무조건 SQS입니다.
* **Amazon MQ를 쓰세요:** 이미 ActiveMQ나 RabbitMQ 기반의 시스템을 운영 중이고, 큰 수정 없이 빠르게 AWS로 옮기고 싶을 때만 선택하시면 됩니다.
