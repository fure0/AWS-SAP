## 1. 하이브리드 클라우드와 Storage Gateway 개요

하이브리드 클라우드는 인프라의 일부는 **AWS 클라우드**, 일부는 **온프레미스(자체 데이터 센터)**에 두는 구조입니다.

* **사용 이유:** 긴 마이그레이션 기간, 보안/컴플라이언스 준수, 워크로드의 탄력적 운영 등.
* **AWS Storage Gateway의 역할:** 온프레미스와 AWS 클라우드 스토리지 사이를 잇는 **'다리(Bridge)'** 역할을 수행합니다.

---

## 2. 주요 사용 사례 (Use Cases)

* **재해 복구(DR):** 온프레미스 데이터를 클라우드에 백업하고 필요 시 복구.
* **클라우드 마이그레이션:** 데이터를 클라우드로 단계적으로 이전.
* **스토리지 확장:** 자주 안 쓰는 데이터는 클라우드에, 자주 쓰는 데이터는 온프레미스에 보관.
* **로컬 캐싱:** 대역폭을 절약하고 지연 시간을 줄이기 위해 클라우드 데이터를 로컬에 캐시로 저장.

---

## 3. Storage Gateway의 4가지 유형

### ① Amazon S3 파일 게이트웨이 (S3 File Gateway)

온프레미스 애플리케이션이 **S3 객체를 파일 형태로** 접근할 수 있게 합니다.

* **프로토콜:** NFS, SMB 지원.
* **특징:** S3 버킷을 로컬 드라이브처럼 마운트하여 사용. 최근 사용 데이터는 로컬에 캐싱.
* **스토리지 클래스:** S3 Standard, IA, Intelligent-Tiering 등 사용 가능 (단, **Glacier로 직접 저장은 불가**, 수명 주기 정책을 통해 전환은 가능).
* **인증:** Windows 환경을 위한 Active Directory(AD) 연동 지원.

### ② Amazon FSx 파일 게이트웨이 (FSx File Gateway)

**Windows 파일 서버용 Amazon FSx**에 대한 짧은 지연 시간의 액세스를 제공합니다.

* **핵심 용도:** 온프레미스에서 FSx for Windows File Server를 사용할 때, **로컬 캐시**를 생성하여 액세스 속도를 높임.
* **특징:** SMB, NTFS, AD와 100% 호환되어 기업 내 홈 디렉토리나 공유 폴더 운영에 최적.

### ③ 볼륨 게이트웨이 (Volume Gateway)

**iSCSI 프로토콜**을 사용하여 온프레미스 서버에 블록 스토리지(Volume)를 제공합니다.

* **작동 방식:** 데이터를 S3에 저장하고 이를 **EBS 스냅샷** 형태로 백업.
* **구분:**
* **캐시 볼륨(Cached Volumes):** 전체 데이터는 S3에, 자주 쓰는 것만 로컬 캐시에 저장.
* **저장 볼륨(Stored Volumes):** 전체 데이터를 온프레미스에 두고, 정기적으로 S3에 백업.



### ④ 테이프 게이트웨이 (Tape Gateway)

기존의 **물리적 테이프 백업 시스템을 클라우드로 대체**할 때 사용합니다.

* **구성:** 가상 테이프 라이브러리(VTL)를 제공.
* **저장소:** Amazon S3 및 Glacier/Glacier Deep Archive를 활용해 아카이브 비용 절감.
* **호환성:** 기존 백업 소프트웨어(iSCSI 인터페이스)와 그대로 연동 가능.

---

## 4. 하드웨어 어플라이언스 (Hardware Appliance)

데이터 센터에 가상화 환경(VMware, Hyper-V 등)이 없는 경우, **Amazon.com에서 전용 물리 하드웨어**를 주문하여 설치할 수 있습니다.

* **장점:** 별도의 가상 서버 설정 없이 물리 장비를 네트워크에 연결만 하면 파일/볼륨/테이프 게이트웨이로 즉시 구축 가능.

---

## 5. 한눈에 보는 요약 표

| 구분 | 연결 프로토콜 | AWS 연결 서비스 | 주요 특징 |
| --- | --- | --- | --- |
| **S3 파일 게이트웨이** | NFS, SMB | Amazon S3 | S3 객체를 파일 시스템처럼 사용, 로컬 캐싱 |
| **FSx 파일 게이트웨이** | SMB | Amazon FSx (Windows) | Windows 파일 공유 최적화, 로컬 캐싱 |
| **볼륨 게이트웨이** | iSCSI | S3 (EBS Snapshot) | 블록 스토리지 백업 및 재해 복구 |
| **테이프 게이트웨이** | iSCSI VTL | S3, Glacier | 물리 테이프 인프라의 클라우드 전환 |
