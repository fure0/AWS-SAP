## 1. AWS DMS (Database Migration Service) 개요

AWS DMS는 데이터베이스를 AWS로 빠르고 안전하게 이관할 수 있도록 돕는 서비스입니다.

* **주요 특징:**
* **복원력 및 자가 복구:** 마이그레이션 실패 시 자동 복원 기능 지원.
* **소스 가용성 유지:** 이관 중에도 소스 DB를 중단 없이 계속 사용 가능 (Zero Downtime 지향).
* **복제 인스턴스:** 마이그레이션 작업을 수행하기 위해 중간에서 데이터를 처리할 **EC2 인스턴스**가 생성되어야 함.



### 마이그레이션 유형

1. **동종(Homogeneous) 이관:** 소스와 타겟의 엔진이 같을 때 (예: Oracle → Oracle).
2. **이종(Heterogeneous) 이관:** 소스와 타겟의 엔진이 다를 때 (예: SQL Server → Aurora).
3. **연속 데이터 복제(CDC):** 변경 데이터 캡처(Change Data Capture)를 통해 실시간으로 변경 사항만 동기화.

---

## 2. DMS의 소스(Source)와 타겟(Target)

시험에서 가장 중요한 포인트 중 하나는 **"무엇이 소스가 될 수 없는가"**를 구분하는 것입니다.

| 구분 | 지원 대상 (주요 항목) |
| --- | --- |
| **공통 (소스/타겟 모두 가능)** | 온프레미스 DB, EC2 기반 DB, RDS(Aurora 포함), S3, Oracle, SQL Server, MySQL, PostgreSQL, MariaDB, SAP ASE, MongoDB, DocumentDB |
| **타겟만 가능 (소스 불가 ⚠️)** | **Amazon Redshift, Kinesis Data Streams, Amazon OpenSearch Service** |
| **Azure 관련** | Azure SQL Database (소스 가능) |

> **💡 시험 팁:** OpenSearch나 Redshift는 데이터를 받는 '타겟'으로는 훌륭하지만, DMS의 '소스'로 사용할 수는 없습니다.

---

## 3. AWS SCT (Schema Conversion Tool)

이종 간 마이그레이션 시 **데이터베이스 스키마(구조)를 타겟 엔진에 맞게 변환**해 주는 도구입니다.

* **사용 시점:** 엔진이 변경될 때 (예: Oracle → Aurora, Teradata → Redshift).
* **작동 방식:** SCT가 먼저 스키마를 변환하여 타겟에 생성한 후, DMS가 데이터를 옮깁니다.
* **SCT가 필요 없는 경우:** 엔진이 같을 때 (예: 온프레미스 PostgreSQL → RDS PostgreSQL). 이를 **리플랫폼(Re-platform)** 마이그레이션이라 합니다.

---

## 4. DMS 상세 기능 및 로드(Load) 방식

### 세 가지 로드 방식

1. **Full Load:** 기존 데이터를 한 번에 모두 이관.
2. **Full Load + CDC:** 전체 이관 후, 그 사이 발생한 변경 사항을 연속적으로 복제.
3. **CDC Only:** 변경된 데이터만 스트리밍하여 동기화.

### 기타 중요 기술 사항

* **네트워크:** VPC Peering, VPN, Direct Connect 환경에서 모두 작동합니다.
* **Oracle 특이사항:** 소스에서 TDE(투명한 데이터 암호화) 지원 시 BinaryReader 이용. 타겟이 RDS Oracle일 경우, **기본 키(Primary Key)**가 있는 BLOB 데이터 이관을 지원합니다.
* **OpenSearch 제약:** OpenSearch는 DMS 소스가 될 수 없으므로, OpenSearch 데이터를 복제하려면 전용 도구를 써서 S3로 내보낸(Export) 후 이동해야 합니다.

---

## 5. 대용량 이관: Snowball Edge + DMS 조합

네트워크 대역폭이 좁고 데이터가 수 테라바이트(TB) 이상으로 많을 때 사용하는 고난도 전략입니다.

1. **SCT 준비:** 로컬에서 SCT를 사용해 스키마 변환.
2. **Snowball Edge 로드:** 온프레미스 데이터를 Snowball Edge 기기에 직접 복사.
3. **배송 및 S3 업로드:** 기기를 AWS로 보내면 데이터가 **Amazon S3**에 로드됨.
4. **DMS 개입:** S3에 저장된 파일을 최종 타겟 DB로 이관.
5. **CDC 동기화:** Snowball이 이동하는 동안 발생한 최신 변경 사항은 DMS의 CDC 기능을 통해 타겟 DB에 최종 반영.

> **장점:** 네트워크 부하 없이 대용량 데이터를 옮기면서도, 최신성(Sync)을 유지할 수 있음.
