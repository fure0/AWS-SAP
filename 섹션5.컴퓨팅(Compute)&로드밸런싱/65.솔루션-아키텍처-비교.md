## 1. 전통적인 EC2 기반 구성

### ① EC2 + Elastic IP (고정 IP 방식)

가장 단순한 형태의 고전적인 장애 조치(Failover) 방식입니다.

* **구조:** 퍼블릭 EC2에 Elastic IP(EIP)를 연결하여 통신. 장애 발생 시 대기 인스턴스로 EIP를 즉시 이전.
* **특징:** * 클라이언트는 동일한 IP를 유지하므로 변화를 감지하지 못함.
* **장점:** 비용이 매우 저렴하며 설정이 간단함.
* **단점:** 한 번에 하나의 인스턴스만 트래픽을 처리하므로 **수평 확장(Scaling)이 불가능**함.



### ② EC2 + Route 53 (DNS 로드 밸런싱)

여러 대의 EC2를 사용하며 DNS 레코드를 통해 부하를 분산합니다.

* **구조:** Route 53에서 여러 EC2의 IP를 A 레코드로 응답.
* **특징:**
* **장점:** 여러 인스턴스를 활용한 수평 확장 가능.
* **단점:** **DNS TTL(Time To Live)** 문제로 인해 장애 인스턴스 제거 및 신규 인스턴스 투입 시 반영 속도가 느림(클라이언트가 과거 정보를 캐싱하고 있을 수 있음).
* **필수 요건:** 클라이언트 측에서 호스트 이름 확인 실패 시 재시도하는 로직이 필요함.



---

## 2. 확장형 및 컨테이너 아키텍처

### ① ALB + ASG (표준 아키텍처)

AWS에서 가장 권장되는 전통적인 확장형 아키텍처입니다.

* **구조:** Route 53(별칭 레코드) → ALB → Auto Scaling Group(ASG).
* **특징:**
* **장점:** ALB의 상태 확인(Health Check) 덕분에 비정상 인스턴스로 트래픽이 가지 않음.
* **단점:** 신규 인스턴스 부팅 및 부트스트래핑(User Data) 시간으로 인해 확장 속도가 다소 느릴 수 있음(AMI 최적화로 보완 가능).
* **운영 팁:** 급격한 트래픽 증가 시 ALB 예열(Pre-warming) 필요. ASG 타겟 CPU 사용률은 보통 **40~70%**가 적당함.



### ② ALB + ECS on EC2

EC2 인스턴스 위에서 도커 컨테이너를 실행하는 방식입니다.

* **특징:** * **동적 포트 매핑:** 한 EC2 안에서 동일한 앱의 여러 태스크 실행 가능 → 자원 효율 극대화.
* **단점:** EC2(인프라) 확장과 ECS 서비스(태스크) 확장을 동시에 관리해야 하므로 오케스트레이션이 복잡함.



### ③ ALB + ECS on Fargate (서버리스 컨테이너)

인프라 관리 부담을 없앤 현대적인 방식입니다.

* **특징:** * **장점:** 관리할 EC2가 없으며 확장 속도가 매우 빠름(컨테이너 기반).
* **보안:** AWS가 네트워크 및 인프라를 관리하여 보안성이 높음.
* **성격:** '관리형' 서비스에 가까우며, 안전하고 높은 확장성을 제공함.



---

## 3. 서버리스 및 API 기반 아키텍처

### ① ALB + Lambda

ALB의 대상 그룹(Target Group)으로 Lambda를 설정하는 방식입니다.

* **특징:**
* **장점:** API Gateway 대비 **비용이 10~20배 저렴**함. WAF와 결합 가능.
* **용도:** 하이브리드 마이크로서비스(일부는 ECS, 일부는 Lambda)에 적합.
* **제약:** 동시성 1,000개 제한(기본), API Gateway의 고급 기능(인증, 캐싱 등) 부재.



### ② API Gateway + Lambda (Full Serverless)

가장 대중적인 서버리스 패턴입니다.

* **특징:**
* **장점:** 인증, 속도 제한(Throttling), 캐싱, API 키 관리 등 풍부한 기능 제공. X-Ray 통합으로 추적 용이.
* **단점:** **Cold Start**로 인한 지연 시간 발생 가능.
* **제약:** 기본 초당 10,000개 요청 및 동시성 1,000개(소프트 제한, 상향 가능).



### ③ API Gateway + AWS 서비스 (Direct Integration)

Lambda를 거치지 않고 직접 AWS 서비스와 통신하는 방식입니다.

* **구조:** API Gateway → SQS/SNS/Step Functions 등.
* **장점:** * Lambda 호출 비용 절감 및 지연 시간 단축.
* 유지보수할 코드가 줄어들어 관리가 용이함.


* **제약:** API Gateway의 **페이로드 제한(10MB)** 주의 (S3 프록시 사용 시 특히 유의).

### ④ API Gateway + HTTP 백엔드 (ALB 등)

기존 HTTP 기반 서버 앞에 API Gateway를 배치하는 방식입니다.

* **용도:** 온프레미스 서버나 기존 ALB 기반 앱에 API Gateway의 기능(인증, 캐싱, 속도 제어)을 추가하고 싶을 때 사용.

---

## 요약 비교 테이블

| 아키텍처 | 확장성 | 관리 부담 | 주요 특징 |
| --- | --- | --- | --- |
| **EC2 + EIP** | 낮음 | 중간 | 저렴, 고정 IP 환경 필수 시 사용 |
| **ALB + ASG** | 높음 | 중간 | 표준적, 안정적이나 확장 속도 보통 |
| **ECS Fargate** | 매우 높음 | 낮음 | 서버리스 컨테이너, 빠른 확장 |
| **ALB + Lambda** | 매우 높음 | 낮음 | 서버리스, API Gateway 대비 저렴 |
| **API GW + Lambda** | 최고 | 최저 | 완전 서버리스, 강력한 API 관리 기능 |

---