# ☁️ AWS Organizations 핵심 정리

AWS Organizations는 다수의 AWS 계정을 중앙에서 통합 관리하고 효율적으로 운영할 수 있게 해주는 서비스입니다.

## 1. 조직 구조 (Organizational Structure)

* **Root (루트):** 조직의 최상위 컨테이너입니다.
* **Management Account (관리 계정):** 조직 전체를 관리하는 마스터 계정입니다. 결제 관리 및 계정 생성을 담당합니다.
* **Member Account (멤버 계정):** 조직에 소속된 일반 계정들입니다.
* **OU (Organizational Unit, 조직 단위):** 계정들을 그룹화하는 논리적 단위입니다.
* 계층 구조(Nested OU) 지원: OU 안에 또 다른 OU를 생성할 수 있습니다. (예: Prod OU 하위에 HR OU 생성)
* 용도별(Dev, Test, Prod), 부서별(HR, Finance), 프로젝트별로 자유롭게 구성 가능합니다.



---

## 2. 계정 액세스 권한 관리: `OrganizationAccountAccessRole`

관리 계정이 멤버 계정을 제어하기 위해 사용하는 아주 중요한 메커니즘입니다.

* **자동 생성:** Organizations API를 통해 **새 멤버 계정을 생성**하면, 해당 계정 내에 `OrganizationAccountAccessRole`이라는 IAM 역할이 자동으로 생성됩니다.
* **권한:** 이 역할은 관리 계정에게 해당 멤버 계정에 대한 **Full Admin 권한**을 부여합니다.
* **초대된 계정 주의사항:** 이미 존재하는 기존 계정을 조직으로 **초대(Invite)**한 경우에는 이 역할이 자동으로 생기지 않습니다. 이 경우 **수동으로 역할을 생성**해야 관리 계정이 접근할 수 있습니다.

---

## 3. 다중 계정 전략 (Multi-Account Strategy)

계정을 분리하는 이유는 다음과 같습니다.

* **환경 격리:** Dev, Test, Prod 환경을 분리하여 보안 사고나 실수 방지.
* **리소스 최적화:** VPC별 계정 할당, 서비스 한도(Service Quotas) 개별 관리.
* **중앙 집중 로깅:** 모든 계정의 **CloudTrail** 및 **CloudWatch Logs**를 보안 전용 중앙 S3 버킷 계정으로 통합.
* **비즈니스 단위:** 코스트 센터(Cost Center)나 부서별로 비용을 추적하기 용이함.

---

## 4. 기능 모드 (Feature Modes)

Organizations에는 두 가지 모드가 있으며, 시험에서 자주 다뤄집니다.

| 기능 모드 | 주요 특징 |
| --- | --- |
| **통합 청구 (Consolidated Billing)** | - 모든 계정의 비용을 관리 계정에서 한꺼번에 결제.<br>

<br>- 볼륨 할인(EC2, S3 대량 사용 할인) 혜택 공유. |
| **전체 기능 (All Features)** | - 통합 청구 기능 포함.<br>

<br>- **SCP (Service Control Policy)** 사용 가능.<br>

<br>- 멤버 계정이 조직을 임의로 탈퇴하는 것을 방지 가능. |

> [!CAUTION]
> **전체 기능 모드**로 전환하려면 초대된 멤버 계정들의 승인이 필요하며, 한 번 활성화하면 다시 **통합 청구 전용 모드로 되돌릴 수 없습니다.**

---

## 5. 비용 절감 공유 (RI & Savings Plans)

* **기본 동작:** 조직 내 한 계정에서 구매한 **예약 인스턴스(RI)**나 **Savings Plans** 할인 혜택은 통합 청구 덕분에 조직 내 다른 계정들과 공유됩니다.
* **공유 비활성화:** 관리 계정은 특정 계정의 RI/Savings Plans 할인 공유를 **끌(Off) 수 있습니다.**
* **공유 조건:** 두 계정 간에 할인을 공유하려면 **양쪽 계정 모두 공유 설정이 켜져 있어야** 합니다.

---

## 6. 계정 이동 프로세스 (Account Migration)

하나의 조직(A)에서 다른 조직(B)으로 계정을 옮기는 순서는 다음과 같습니다.

1. **제거 (Remove):** 기존 조직(A)에서 멤버 계정을 삭제합니다. (이때 해당 계정은 독립 계정이 됨)
2. **초대 (Invite):** 새로운 조직(B)에서 해당 계정을 초대합니다.
3. **수락 (Accept):** 해당 멤버 계정에서 초대를 수락하면 이동이 완료됩니다.
