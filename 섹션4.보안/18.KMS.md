## 1. AWS KMS 개요

AWS KMS는 데이터 암호화에 사용되는 **암호화 키를 생성 및 관리**하는 서비스입니다.

* **통합성:** IAM과 통합되어 권한을 제어하며, EBS, S3, RDS, SSM 등 거의 모든 AWS 서비스와 연동됩니다.
* **접근 방식:** CLI 또는 SDK를 통해 상호작용할 수 있습니다.
* **보안성:** 키 자체를 암호화되지 않은 상태로 추출하는 것은 불가능하며, 반드시 KMS API 호출을 통해서만 데이터를 처리합니다.

---

## 2. KMS 키의 유형 (암호화 방식 기준)

| 구분 | 대칭 키 (Symmetric Keys) | 비대칭 키 (Asymmetric Keys) |
| --- | --- | --- |
| **구성** | 단일 암호화 키 | 키 쌍 (공개 키 + 개인 키) |
| **특징** | 암호화와 복호화에 동일한 키 사용 | 공개 키로 암호화/검증, 개인 키로 복호화/서명 |
| **사용처** | AWS 통합 서비스 및 봉투 암호화(Envelope Encryption) | AWS 외부 사용자에게 공개 키를 공유해야 할 때 |
| **장점** | 사용이 쉽고 대부분의 AWS 서비스 표준임 | 외부(신뢰할 수 없는 환경)에서도 암호화 가능 |

---

## 3. KMS 키의 유형 (관리 주체 기준)

### ① 고객 관리 키 (Customer Managed Keys)

* 사용자가 직접 생성, 관리 및 사용합니다.
* **권한:** 키 정책(Resource Policy) 설정 및 CloudTrail을 통한 감사 가능.
* **회전:** **자동 회전(1년 단위 기본, 기간 조정 가능)** 또는 수동 회전 가능.

### ② AWS 관리 키 (AWS Managed Keys)

* AWS 서비스(S3, EBS 등)가 사용자를 대신해 생성하고 관리합니다. (UI에서 `aws/service-name` 형식으로 확인 가능)
* **회전:** AWS가 **매년 자동으로 회전**시키며, 사용자가 회전 주기를 바꿀 수 없습니다.

### ③ AWS 소유 키 (AWS Owned Keys)

* AWS가 여러 계정의 리소스를 보호하기 위해 내부적으로 사용합니다.
* 사용자 계정에 표시되지 않으며, 관리나 감사(CloudTrail)도 불가능합니다.

---

## 4. 키 자료 원본 (Key Material Origin)

키를 생성할 때 암호화의 핵심인 '키 자료'를 어디서 가져올지 결정해야 합니다. **(생성 후 변경 불가)**

1. **AWS KMS:** KMS 내부에서 자체적으로 키 자료를 생성하고 관리합니다.
2. **외부 (External):** 사용자가 직접 생성한 키 자료를 KMS로 가져옵니다(Import).
* 보안 및 내구성에 대한 책임은 사용자에게 있습니다.
* **자동 회전이 지원되지 않으므로** 사용자가 직접 관리해야 합니다.


3. **사용자 지정 키 저장소 (Custom Key Store - CloudHSM):**
* KMS를 **AWS CloudHSM** 클러스터와 연결합니다.
* 키 자료는 사용자가 소유한 전용 HSM(하드웨어 보안 모듈) 내에 저장됩니다.
* **사용 사례:** 엄격한 규정 준수가 필요하거나 전용 하드웨어 수준의 제어가 필요한 경우.



---

## 5. KMS 다중 지역 키 (Multi-Region Keys)

한 리전에서 생성한 키를 다른 리전으로 복제하여 **동일한 키 ID와 키 자료**를 가지게 하는 기능입니다.

* **동작 방식:** 하나의 '기본 키(Primary)'를 두고 다른 리전에 '복제본(Replica)'을 생성합니다.
* **핵심 이점:** 리전 A에서 암호화한 데이터를 리전 B에서 별도의 재암호화 과정 없이 동일한 키 ID로 복호화할 수 있습니다.
* **주요 사용 사례:**
* **재해 복구(DR):** 리전 장애 시 다른 리전에서 즉시 데이터 사용.
* **글로벌 애플리케이션:** DynamoDB 글로벌 테이블 등 여러 리전에 배포된 데이터 관리.
