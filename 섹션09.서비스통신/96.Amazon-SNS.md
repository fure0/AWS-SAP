# π Amazon SNS (Simple Notification Service) μ΄μ •λ¦¬

Amazon SNSλ” "κ²μ‹/κµ¬λ…(Pub/Sub)" λ¨λΈμ„ μ‚¬μ©ν•λ” κ΄€λ¦¬ν• λ©”μ‹μ§• μ„λΉ„μ¤μ…λ‹λ‹¤. μ„λΉ„μ¤ κ°„μ κ²°ν•©λ„λ¥Ό λ‚®μ¶”κ³ (Decoupling), ν•λ‚μ μ΄λ²¤νΈλ¥Ό μ—¬λ¬ μμ‹ μμ—κ² λ™μ‹μ— μ „νν•  λ• ν•µμ‹¬μ μΈ μ—­ν• μ„ ν•©λ‹λ‹¤.

## 1. SNSμ ν•µμ‹¬ κ°λ…: Pub/Sub ν¨ν„΄

κΈ°μ΅΄μ μ§μ ‘ μ—°κ²° λ°©μ‹(Direct Integration)μ€ μƒλ΅μ΄ μ„λΉ„μ¤κ°€ μ¶”κ°€λ  λ•λ§λ‹¤ λ§¤λ² μ—°κ²° μ½”λ“λ¥Ό μ‘μ„±ν•΄μ•Ό ν•λ” λ²κ±°λ΅μ›€μ΄ μμµλ‹λ‹¤. SNSλ” μ΄λ¥Ό **Pub/Sub** λ¨λΈλ΅ ν•΄κ²°ν•©λ‹λ‹¤.

* **Publisher (μƒμ„±μ):** λ©”μ‹μ§€λ¥Ό νΉμ • **Topic(ν† ν”½)**μΌλ΅ λ³΄λƒ…λ‹λ‹¤. (μ: Buying Service)
* **Topic (ν† ν”½):** λ©”μ‹μ§€κ°€ μ „λ‹¬λλ” λ…Όλ¦¬μ  μ§€μ μ…λ‹λ‹¤.
* **Subscriber (κµ¬λ…μ):** ν† ν”½μ„ κµ¬λ…ν•κ³  μλ” λ¨λ“  λ€μƒμ€ μ „μ†΅λ λ©”μ‹μ§€λ¥Ό μ¦‰μ‹ μμ‹ ν•©λ‹λ‹¤.
* **Fan-out:** ν•λ‚μ λ©”μ‹μ§€κ°€ μ—¬λ¬ κµ¬λ…μ(SQS, Lambda, Email λ“±)μ—κ² λ™μ‹μ— λ³µμ λμ–΄ μ „λ‹¬λλ” λ°©μ‹μ…λ‹λ‹¤.

---

## 2. μ£Όμ” νΉμ§• λ° ν™•μ¥μ„±

SNSλ” λ€κ·λ¨ λ¶„μ‚° μ‹μ¤ν…μ„ μ§€μ›ν•κΈ° μ„ν•΄ λ†’μ€ μ²λ¦¬λ‰κ³Ό ν™•μ¥μ„±μ„ μ κ³µν•©λ‹λ‹¤.

* **κµ¬λ…μ μ:** ν† ν”½λ‹Ή μµλ€ **1,250λ§ λ…**κΉμ§€ κµ¬λ… κ°€λ¥ν•©λ‹λ‹¤.
* **ν† ν”½ μ ν•:** κ³„μ •λ‹Ή κΈ°λ³Έ **10λ§ κ°**κΉμ§€ μƒμ„± κ°€λ¥ν•λ©°, ν•„μ”μ‹ ν•λ„λ¥Ό μ¦μ„¤ν•  μ μμµλ‹λ‹¤.
* **λ©”μ‹μ§€ ν•„ν„°λ§:** κΈ°λ³Έμ μΌλ΅ λ¨λ“  κµ¬λ…μλ” ν† ν”½μ λ¨λ“  λ©”μ‹μ§€λ¥Ό λ°›μ§€λ§, **Filter Policy**λ¥Ό μ‚¬μ©ν•μ—¬ νΉμ • μ΅°κ±΄μ— λ§λ” λ©”μ‹μ§€λ§ μ„ νƒμ μΌλ΅ μμ‹ ν•  μ μμµλ‹λ‹¤.

---

## 3. μ§€μ›λλ” κµ¬λ… λ€μƒ (Endpoints)

SNSμ—μ„ λ©”μ‹μ§€λ¥Ό λ³΄λ‚Ό μ μλ” λ€μƒμ€ λ§¤μ° λ‹¤μ–‘ν•©λ‹λ‹¤.

| λ¶„λ¥ | λ€μƒ μ„λΉ„μ¤ / ν”„λ΅ν† μ½ |
| --- | --- |
| **AWS μ„λΉ„μ¤** | SQS, Lambda, Kinesis Data Firehose (S3/Redshift μ „μ†΅μ©) |
| **μ•λ¦Ό μ„λΉ„μ¤** | μ΄λ©”μΌ(Email), SMS, λ¨λ°”μΌ ν‘Έμ‹ μ•λ¦Ό |
| **μ™Έλ¶€ μ—°λ™** | HTTP / HTTPS μ—”λ“ν¬μΈνΈ |

---

## 4. SNSμ™€ ν†µν•©λλ” AWS μ„λΉ„μ¤

μλ§μ€ AWS μ„λΉ„μ¤κ°€ μ΄λ²¤νΈλ¥Ό λ°μƒμ‹ν‚¬ λ• SNSλ¥Ό λ©μ μ§€λ΅ μ‚¬μ©ν•©λ‹λ‹¤.

* **λ¨λ‹ν„°λ§:** CloudWatch Alarms
* **μΈν”„λΌ:** Auto Scaling Groups, CloudFormation
* **λ³΄μ• λ° κ΄€λ¦¬:** S3 Bucket Events, AWS Budgets, AWS DMS
* **λ°μ΄ν„°λ² μ΄μ¤:** RDS Events, DynamoDB, Lambda λ“±

---

## 5. μ‘λ™ λ°©μ‹ (Workflow)

### μΌλ°μ μΈ λ°©μ‹ (Topic Publish)

1. **Topic μƒμ„±:** λ©”μ‹μ§€λ¥Ό λ¨μ„ μ§€μ μ„ λ§λ“­λ‹λ‹¤.
2. **Subscription μƒμ„±:** ν•΄λ‹Ή ν† ν”½μ„ κµ¬λ…ν•  λ€μƒ(μ΄λ©”μΌ, SQS λ“±)μ„ μ—°κ²°ν•©λ‹λ‹¤.
3. **Publish:** ν† ν”½μΌλ΅ λ©”μ‹μ§€λ¥Ό λ³΄λƒ…λ‹λ‹¤. κµ¬λ…μλ“¤μ€ μλ™μΌλ΅ λ©”μ‹μ§€λ¥Ό κ°€μ Έκ°‘λ‹λ‹¤.

### λ¨λ°”μΌ μ „μ© (Direct Publish)

* λ¨λ°”μΌ μ•± SDKλ¥Ό μ‚¬μ©ν•κΈ° μ„ν•΄ **ν”λ«νΌ μ• ν”λ¦¬μΌ€μ΄μ…**κ³Ό **μ—”λ“ν¬μΈνΈ**λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
* Google(GCM/FCM), Apple(APNS), Amazon(ADM) λ“± λ‹¤μ–‘ν• ν‘Έμ‹ μ•λ¦Ό μ„λΉ„μ¤λ¥Ό μ§€μ›ν•©λ‹λ‹¤.

---

## 6. λ³΄μ• λ° μ•΅μ„Έμ¤ μ μ–΄

SNSλ” κΈ°μ—… ν™κ²½μ— μ ν•©ν• κ°•λ ¥ν• λ³΄μ• κΈ°λ¥μ„ μ κ³µν•©λ‹λ‹¤.

* **μ•”νΈν™” (Encryption):**
  * **In-flight:** μ „μ†΅ μ¤‘ μ•”νΈν™” μ§€μ›.
  * **At-rest:** AWS KMSλ¥Ό μ΄μ©ν• μ €μ¥ λ°μ΄ν„° μ•”νΈν™”.
  * **Client-side:** ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ μ•”λ³µνΈν™”λ¥Ό μν–‰ν•  μλ„ μμµλ‹λ‹¤.


* **μ•΅μ„Έμ¤ μ μ–΄ (Access Control):**
  * **IAM Policy:** λ¨λ“  SNS API νΈμ¶μ— λ€ν• κ¶ν• μ μ–΄.
  * **SNS Access Policy (Resource-based):** S3 Bucket μ •μ±…κ³Ό μ μ‚¬ν•λ©°, **κµμ°¨ κ³„μ •(Cross-account) μ ‘κ·Ό**μ΄λ‚ S3 μ΄λ²¤νΈ κ°™μ€ λ‹¤λ¥Έ μ„λΉ„μ¤μ μ ‘κ·Όμ„ ν—μ©ν•  λ• μ μ©ν•©λ‹λ‹¤.
