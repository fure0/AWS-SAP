## 💰 AWS S3 비용 절감 및 최적화 전략 요약

S3 비용을 효율적으로 관리하기 위해서는 **스토리지 클래스의 적절한 선택**, **수명 주기 관리**, 그리고 **데이터 요청 주체 설정**이 핵심입니다.

---

### 1. S3 스토리지 클래스 (Storage Classes) 이해

데이터의 액세스 빈도와 복구 요구 사항에 따라 적합한 클래스를 선택해야 합니다.

| 클래스 | 특징 | 권장 사용 사례 |
| --- | --- | --- |
| **Standard** | 범용 스토리지. 높은 가용성 | 자주 액세스하는 데이터 |
| **Standard-IA** | 저장 비용은 저렴하나, **액세스 시 비용 발생** | 드물게 액세스하는 데이터 |
| **One Zone-IA** | 단일 AZ에 저장. 비용이 매우 저렴하지만 **AZ 장애 시 손실 위험** | 재생성 가능한 데이터 (예: 이미지 썸네일) |
| **Intelligent Tiering** | 액세스 패턴을 모니터링하여 **자동으로 티어 이동** | 패턴을 알 수 없거나 변화하는 데이터 |
| **Glacier Instant** | 즉시 검색 가능 (밀리초 단위) | 아카이브 중 빠른 조회가 필요한 데이터 |
| **Glacier Flexible** | 다양한 검색 옵션 제공 (분~시간 단위) | 일반적인 백업 및 아카이브 |
| **Glacier Deep Archive** | **최저 비용**, 가장 느린 검색 속도 | 장기 보관용 데이터 (연 단위 보관) |

---

### 2. 자동화 및 리소스 최적화

#### 🔄 S3 수명 주기 구성 (Lifecycle Configuration)

* **자동 전환:** 수동으로 변경할 필요 없이, 설정된 일정 시간이 지나면 객체를 더 저렴한 티어로 자동 이동시킵니다.
* **자동 삭제:** 오래된 데이터를 자동으로 삭제하여 불필요한 스토리지 비용을 방지합니다.

#### 🔍 S3 Select & Glacier Select

* 객체 전체를 다운로드하는 대신, **SQL을 사용하여 필요한 행과 열(Subset)만 검색**합니다.
* 네트워크 전송량과 CPU 리소스 사용량을 줄여 비용을 절감합니다.

#### 📦 데이터 압축 (Compression)

* S3로 전송 전 데이터를 압축하면 스토리지 점유 용량이 줄어들어 직접적인 비용 절감 효과가 있습니다.

---

### 3. S3 요청자 지불 (Requester Pays)

대규모 데이터 세트를 외부와 공유할 때 유용한 기능입니다.

* **기본 원칙:** 버킷 소유자가 스토리지 비용과 데이터 전송(Outbound) 비용을 모두 부담합니다.
* **작동 방식:** 이 기능을 활성화하면 **데이터를 요청하고 다운로드하는 사람**이 해당 비용을 지불합니다. (단, 데이터 저장 비용은 여전히 소유자 부담)
* **설정 및 주의사항:**
  * **버킷 정책:** S3 Requester Pays를 적용하는 버킷 정책 설정이 필요합니다.
  * **인증 필수:** 요청자는 반드시 IAM을 통해 인증해야 합니다.
  * **IAM 역할 주의:**
    * ❌ **교차 계정 IAM 역할 사용 금지:** 내 계정에서 생성한 역할을 타인이 쓰게 하면, 결국 내 계정으로 비용이 청구됩니다.
    * ✅ **각자의 자격 증명 사용:** 상대방이 자신의 계정에서 생성한 IAM 사용자나 역할로 요청하게 해야 비용이 상대방에게 청구됩니다.





---

### 핵심 요약

> 1. 데이터 성격에 맞는 **스토리지 클래스**를 선택하세요.
> 2. **수명 주기 규칙**을 설정해 자동으로 티어를 관리하세요.
> 3. 대량 데이터 공유 시 **Requester Pays**로 네트워크 비용을 분산하세요.
> 4. 필요한 데이터만 뽑아 쓰는 **S3 Select**를 활용하세요.