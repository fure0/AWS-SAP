## 💰 AWS 비용 관리 도구 상세 정리

### 1. AWS Budgets (예산 관리)

예산을 설정하고 사용량이나 비용이 임계값을 초과할 경우 경보를 발송하는 서비스입니다.

* **4가지 예산 유형:**
  1. **사용 예산 (Usage):** 특정 서비스 사용량 기준
  2. **비용 예산 (Cost):** 발생 비용 기준
  3. **예약 예산 (RI):** 예약 인스턴스 활용도 및 커버리지 트래킹
  4. **절감형 플랜 예산 (Savings Plans):** 절감형 플랜 활용도 및 커버리지 트래킹

* **유연한 필터링:** 서비스, 연결 계정, 태그, 구매 옵션, 인스턴스 타입, 리전, AZ, API 작업 등 세부 설정 가능 (Cost Explorer와 동일한 필터 제공)
* **비용:** 첫 2개 예산은 무료, 이후 **예산당 일 $0.02** 발생
* **알림:** 예산당 최대 5개의 SNS 알림 설정 가능

---

### 2. AWS Budget Actions (예산 조치)

단순 알림을 넘어, 임계값 초과 시 **자동으로 대응 조치**를 취하는 기능입니다.

* **조치 유형:**
  1. **IAM 정책 적용:** 사용자/그룹/역할에 제한적인 정책을 할당하여 권한 축소
  2. **SCP(서비스 제어 정책) 적용:** OU(조직 단위) 레벨에서 계정의 권한 제어
  3. **리소스 중지:** 실행 중인 EC2 또는 RDS 인스턴스를 강제로 중지

* **실행 방식:** '자동 실행' 또는 '관리자 승인 후 실행' 중 선택 가능

---

### 3. 예산 관리 아키텍처 비교 (중앙 vs 분산)

#### 🏢 중앙 관리형 아키텍처 (Centralized)

모든 멤버 계정의 예산을 **관리 계정(Payer Account)**에서 통합 관리하는 방식입니다.

* **프로세스:**
  1. 관리 계정에서 각 멤버 계정별로 필터링된 예산 생성 (ex. 계정이 10개면 예산 10개 생성).
  2. 임계값 돌파 시 **SNS 알림** 발생 → **Lambda 함수** 호출.
  3. Lambda가 API를 통해 해당 멤버 계정을 **제한적인 SCP가 적용된 OU**로 이동시킴.
  4. 이동된 계정은 신규 리소스 생성이 차단되며, 관리자에게 최종 통보.

#### 🌐 분산 관리형 아키텍처 (Decentralized)

각 **멤버 계정 내부**에서 개별적으로 예산을 관리하는 방식입니다.

* **프로세스:**
  1. **CloudFormation StackSets**를 사용하여 모든 멤버 계정에 예산 설정을 일괄 배포.
  2. 각 계정 내에서 예산 초과 시 즉각적인 대응(ex. 해당 계정의 EC2 즉시 중지) 수행.

---

### 4. AWS Cost Explorer (비용 분석)

과거 데이터를 가시화하고 미래 비용을 예측하는 분석 도구입니다.

* **주요 기능:**
  * **시각화:** 시간 흐름에 따른 비용 및 사용량 그래프 제공.
  * **세분화 분석:** 전체 요약부터 리소스 단위(Hourly, Monthly)의 상세 데이터까지 분석 가능.
  * **예측(Forecasting):** 과거 이력을 기반으로 **최장 12개월**까지의 예상 비용 산출.
  * **최적화 제안:** 사용 패턴을 분석하여 가장 효율적인 **절감형 플랜(Savings Plans)** 추천.



> **💡 핵심 요약:** **AWS Budgets**는 미래의 지출을 "통제(Control)"하고 사고를 방지하는 데 목적이 있고, **Cost Explorer**는 과거와 현재의 지출을 "분석(Analyze)"하고 최적화하는 데 특화되어 있습니다.
