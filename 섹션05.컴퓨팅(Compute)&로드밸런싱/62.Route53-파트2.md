## 1. 호스팅 영역 (Hosting Zones)

호스팅 영역은 도메인과 서브 도메인의 트래픽 라우팅 방식을 정의하는 레코드의 컨테이너입니다.

| 구분 | 퍼블릭 호스팅 영역 (Public) | 프라이빗 호스팅 영역 (Private) |
| --- | --- | --- |
| **용도** | 인터넷 트래픽을 공개 도메인으로 리졸빙 | 특정 VPC 내부에서만 리졸빙 (프라이빗 URL) |
| **주요 타겟** | EC2 퍼블릭 IP, ALB, CloudFront, S3 웹사이트 등 | EC2/DB의 프라이빗 IP 등 내부 리소스 |
| **필수 설정** | 없음 | VPC 내 `enableDnsHostnames`, `enableDnsSupport` 활성화 필수 |

---

## 2. 보안 및 외부 연동

### DNSSEC (DNS Security Extensions)

* **목적:** DNS 데이터의 무결성과 오리진을 확인하여 **중간자 공격(MITM)**으로부터 보호합니다.
* **기능:** 도메인 등록을 위한 DNSSEC과 DNSSEC 서명을 모두 지원합니다.
* **제한:** **퍼블릭 호스팅 영역**에서만 사용 가능합니다.

### 제3자 레지스트라 (Third-party Registrar)

* AWS 외부(가비아, GoDaddy 등)에서 구입한 도메인도 Route 53을 DNS 서비스 제공자로 사용할 수 있습니다.
* 방법: 해당 레지스트라 설정에서 네임서버(NS) 레코드를 AWS로 업데이트합니다.

---

## 3. 상태 확인 (Health Checks)

Route 53은 전 세계의 상태 확인기(Health Checker)를 통해 리소스의 건전성을 모니터링하고 **자동 DNS 페일오버**를 수행합니다.

### 상태 확인의 3가지 유형

1. **엔드포인트 모니터링:** 애플리케이션 서버, IP, 도메인 등 퍼블릭 엔드포인트의 상태를 직접 확인합니다.
2. **계산된 상태 확인 (Calculated Health Checks):**
   * 여러 상태 확인을 논리 조건(`AND`, `OR`, `NOT`)으로 결합합니다.
   * 최대 256개의 하위 상태 확인을 모니터링할 수 있습니다.
   * **활용:** 웹사이트 유지보수 시 의도적으로 페일오버를 트리거할 때 유용합니다.

3. **CloudWatch 알람 모니터링:**
   * **프라이빗 리소스** 모니터링에 최적화되어 있습니다.
   * DynamoDB 스로틀링, RDS 알람, 커스텀 메트릭 등을 기준으로 상태를 판단합니다.



### 엔드포인트 상태 확인 상세 (퍼블릭 전용)

* 약 15개의 글로벌 상태 확인기가 HTTP/HTTPS/TCP 요청을 보냅니다.
* **성공 기준:** 응답 코드가 `2xx` 또는 `3xx`인 경우.
* **데이터 검증:** 응답 본문의 **첫 5,120바이트** 내에 특정 텍스트가 포함되어 있는지 여부로 합격/불합격을 결정할 수 있습니다.

---

## 4. 프라이빗 리소스 모니터링 전략

상태 확인기는 VPC 외부에 있으므로 프라이빗 IP에 직접 접근할 수 없습니다. 따라서 다음 우회 방법을 사용합니다.

* **방법:** `프라이빗 리소스` → `CloudWatch 메트릭` → `CloudWatch 알람` → `Route 53 상태 확인` 연결.
  * 이렇게 하면 내부 VPC 리소스나 온프레미스 리소스도 효과적으로 모니터링할 수 있습니다.

---

## 5. 솔루션 아키텍처 예시: RDS 멀티 리전 페일오버

주 리전(us-east-1)에서 보조 리전(us-east-2)으로 비동기 복제가 일어나는 상황에서 자동 페일오버를 구현하는 방법입니다.

### 아키텍처 설계

1. **상태 모니터링:** CloudWatch 알람을 상태 확인에 연결합니다.
2. **장애 감지:** 상태 확인 실패 시 SNS 알람 또는 CloudWatch 이벤트 발생.
3. **복구 자동화 (Lambda 트리거):**
   * 보조 리전의 **Read Replica를 Master로 승격(Promote)**.
   * Route 53의 DNS 레코드를 새로운 마스터 주소로 업데이트.

> **핵심 포인트:**
> Route 53 상태 확인과 Lambda를 결합하면 리전 간 자동 페일오버 시스템을 구축할 수 있습니다.
