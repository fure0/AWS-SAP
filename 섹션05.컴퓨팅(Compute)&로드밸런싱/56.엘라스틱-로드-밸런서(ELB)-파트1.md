## 1. 로드 밸런서 종류 개요

AWS Managed Load Balancer는 크게 4가지가 있으며, 가급적 기능이 많고 성능이 뛰어난 **신형(v2)** 사용을 권장합니다.

* **Public ELB:** 외부 인터넷 트래픽을 수신 (인터넷 연결형)
* **Private ELB:** VPC 내부 트래픽을 수신 (내부형)

---

## 2. Classic Load Balancer (CLB) - 구형

가장 오래된 세대의 로드 밸런서입니다.

* **작동 계층:** Layer 4 (TCP, SSL), Layer 7 (HTTP, HTTPS)
* **SSL 인증서:** 단 1개의 인증서만 지원합니다. (여러 도메인 대응 시 SAN 인증서 업데이트 필요)
* **특이사항:** 양방향 SSL 인증(Mutual TLS)이 필요할 경우, TCP 패스스루를 통해 EC2 수준에서 인증을 처리해야 합니다.

---

## 3. Application Load Balancer (ALB) - L7

HTTP/HTTPS 트래픽 처리에 최적화된 차세대 로드 밸런서입니다.

* **작동 계층:** Layer 7 (Application Layer)
* **지원 프로토콜:** HTTP, HTTPS, **WebSocket**, HTTP/2
* **핵심 기능:**
* **라우팅 규칙:** URL 경로(Path), 호스트 헤더, 쿼리 문자열 등에 따라 다른 타겟 그룹으로 전송 가능.
* **리디렉션:** ALB 단에서 직접 HTTP를 HTTPS로 리디렉션 가능.
* **SNI 지원:** 다수의 SSL 인증서를 호스팅할 수 있어 여러 도메인 처리에 용이.
* **다이내믹 포트 매핑:** ECS(컨테이너)와 연동하여 동일 인스턴스 내 여러 컨테이너로 부하 분산.


* **타겟 그룹 대상:**
* EC2 인스턴스 (Auto Scaling 그룹 포함)
* ECS 태스크 (컨테이너)
* Lambda 함수 (요청을 JSON 이벤트로 변환)
* IP 주소 (Private IP)



---

## 4. Network Load Balancer (NLB) - L4

고성능, 저지연이 필요한 TCP/UDP 트래픽 처리에 사용됩니다.

* **작동 계층:** Layer 4 (Transport Layer)
* **성능:** 초당 수백만 개의 요청 처리 가능. ALB(400ms)보다 훨씬 낮은 지연 시간(100ms 미만) 제공.
* **IP 특징:** 가용 영역(AZ)당 **1개의 고정 IP(Static IP)**를 가지며, 탄력적 IP(EIP) 할당 가능.
* **타겟 그룹 대상:**
* EC2 인스턴스, IP 주소 (온프레미스 서버 포함)
* **ALB(Application Load Balancer):** NLB의 고정 IP 기능을 활용하면서 ALB의 L7 라우팅 기능을 결합할 때 사용 (NLB -> ALB 연쇄 구조).


* **영역 DNS(Zonal DNS):** 특정 AZ의 NLB 노드로만 트래픽을 보내 데이터 전송 비용을 절감하고 레이턴시를 최소화할 때 활용.

---

## 5. Gateway Load Balancer (GWLB) - L3

보안 및 네트워크 가상 기기(Appliance)를 효율적으로 배포하고 관리하기 위해 사용됩니다.

* **작동 계층:** Layer 3 (Network Layer) - IP 패킷 수준에서 작동.
* **프로토콜:** **GENEVE** 프로토콜 사용 (포트 6081).
* **주요 기능:**
* 방화벽, IDS/IPS, 딥 패킷 검사(DPI) 등 써드파티 장비의 진입/진출점 역할.
* 트래픽을 투명하게 수신하여 보안 인스턴스로 전달 후, 다시 애플리케이션으로 전송.


* **타겟 그룹 대상:** 보안 가상 기기가 설치된 EC2 인스턴스 또는 Private IP 주소.

---

## 💡 로드 밸런서 비교 요약

| 구분 | CLB (구형) | ALB (신형) | NLB (신형) | GWLB (신형) |
| --- | --- | --- | --- | --- |
| **주요 계층** | L4 / L7 | **L7 (App)** | **L4 (Transport)** | **L3 (Network)** |
| **주요 프로토콜** | HTTP, TCP | HTTP, HTTPS, WS | TCP, UDP, TLS | IP (GENEVE) |
| **특징** | 지원 중단 추세 | 경로/헤더 라우팅 | 고정 IP, 초고성능 | 보안 기기 관리 |
| **지연 시간** | 높음 | 보통 | **매우 낮음** | 보통 |
