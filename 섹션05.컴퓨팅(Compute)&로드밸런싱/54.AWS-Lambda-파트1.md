# 💡 AWS Lambda 핵심 요약 정리

## 1. 주요 서비스 통합 (Integrations)

Lambda는 다양한 AWS 서비스와 연결되어 이벤트 기반 아키텍처의 중심 역할을 합니다.

* **호출 및 트리거:**
* **API Gateway:** REST API 호출을 통한 Lambda 실행.
* **S3:** 객체 생성/삭제 시 즉각 반응 (예: 썸네일 생성).
* **Kinesis & DynamoDB Streams:** 스트림 데이터 실시간 처리.
* **EventBridge:** 규칙(Rule)에 따른 이벤트 처리 및 **서버리스 크론탭(Cron Tab)** 역할.
* **SQS:** 메시지 큐의 데이터를 읽어 처리.
* **Cognito:** 인증 전후 훅(Hooks) 처리.
* **SNS & CloudWatch Logs:** 알림 및 로그 기반 반응.



---

## 2. 서버리스 아키텍처 사례

* **서버리스 썸네일 생성:**
1. 사용자가 **S3**에 이미지 업로드.
2. Lambda 트리거 → 이미지 리사이징(썸네일 생성).
3. 결과물은 다시 **S3**에 저장.
4. 이미지 메타데이터(이름, 크기 등)는 **DynamoDB**에 저장.



---

## 3. 지원 언어 및 런타임

* **기본 지원:** Node.js(가장 중요), Python(가장 중요), Java, C#, .NET Core, PowerShell, Ruby.
* **Custom Runtime API:** Rust, Golang 등 기타 언어 지원.
* **컨테이너 이미지:** Docker 이미지를 실행할 수 있으나, **Lambda Runtime API**를 구현해야 함.
> **⚠️ 시험 팁:** 일반적인 Docker 이미지 실행 환경을 묻는다면 Lambda보다는 **EKS**나 **Fargate**가 정답일 확률이 높습니다.



---

## 4. Lambda의 기술적 제한 (Limits)

시험에서 다른 서비스(Batch, ECS 등)와 비교할 때 가장 중요한 부분입니다.

| 구분 | 제한 사항 (Limit) | 비고 |
| --- | --- | --- |
| **메모리(RAM)** | 128MB ~ **10GB** | RAM 용량에 비례해 CPU 성능 할당 (10GB 기준 6 vCPUs) |
| **최대 실행 시간** | **15분** | 초과 시 ECS나 Batch 사용 권장 |
| **임시 저장소(/tmp)** | **10GB** |  |
| **배포 패키지 크기** | 압축 시 50MB / 압축 해제 시 **250MB** | 레이어 포함 기준 |
| **동시성(Concurrency)** | 기본 **1,000개** | 할당량 증가 요청 가능 |
| **호출 페이로드** | 동기식 6MB / 비동기식 256KB |  |

---

## 5. 동시성(Concurrency) 관리

* **예약된 동시성 (Reserved Concurrency):**
* 특정 함수가 사용할 동시성 실행 갯수를 미리 선점하는 기능.
* **장점:** 특정 함수의 성능 보장 + 다른 함수의 폭주로 인한 **스로틀링(Throttling)** 방지.
* **설정 안 할 경우:** 특정 서비스(예: ALB)에서 트래픽이 몰려 1,000개의 동시성을 다 써버리면, 다른 서비스(예: API Gateway)용 Lambda가 실행되지 못하는 현상 발생.



---

## 6. 배포 전략 (with CodeDeploy)

**SAM(Serverless Analytic Model)** 프레임워크와 통합하여 트래픽 전환을 관리합니다.

* **배포 방식:**
1. **Canary:** 소량의 트래픽(예: 10%)을 먼저 보내 상태 확인 후 나머지 전환.
2. **Linear:** 일정 시간마다 정해진 비율로 트래픽 증가 (예: 3분마다 10%씩).
3. **All-at-once:** 즉시 100% 교체.


* **검증:** 트래픽 전환 전/후에 **Hook(Lifecycle Hook)**을 실행하여 상태가 좋지 않으면 롤백.

---

## 7. 모니터링 및 추적

* **CloudWatch Logs:** 모든 실행 로그 기록 (Lambda 실행 역할에 권한 필요).
* **CloudWatch Metrics:** 호출 횟수, 오류율, 지연 시간, 타임아웃 확인.
* **AWS X-Ray:** * 함수 호출의 전체 흐름 추적(Tracing).
* 설정에서 X-Ray 데몬 활성화 및 SDK 코드 삽입 필요.
