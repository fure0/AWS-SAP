## ☁️ AWS 아키텍처 성능 제한 및 확장성 정리

고속 요청 처리와 효율적인 인프라 설계를 위해서는 각 서비스의 **Soft/Hard Limit**과 **캐싱 전략**을 이해하는 것이 필수적입니다. 아키텍처의 왼쪽(사용자 측)에서 요청을 처리할수록 비용과 지연 시간(Latency)이 감소합니다.

### 1. 엣지 및 네트워크 계층 (Edge & Networking)

사용자와 가장 가까운 곳에서 요청을 필터링하고 캐싱하여 백엔드 부하를 줄입니다.

* **Route 53:** 글로벌 DNS 서비스로 고속 요청 처리의 시작점.
* **CloudFront:**
  * **성능:** 초당 약 **100,000개**의 요청 처리 가능.
  * **장점:** 강력한 캐싱 능력으로 오리진(Origin) 부하를 획기적으로 절감.

* **API Gateway:**
  * **제한:** 초당 **10,000개**의 소프트 제한(Soft Limit, 요청 시 증설 가능).
  * **전략:** 자체 캐싱 기능을 활용해 백엔드 컴퓨팅까지 요청이 가지 않도록 차단 가능.

* **ALB (Application Load Balancer):**
  * 과거엔 'Warm-up' 이슈가 있었으나, 현재는 매우 매끄럽게 확장(Scaling)됨.

---

### 2. 컴퓨팅 계층 (Computing)

처리 속도와 확장 방식에 따라 적절한 서비스를 선택해야 합니다.

* **EC2 (ASG/ECS):**
  * **특징:** 인스턴스 부트스트래핑(Bootstrapping) 시간이 필요하여 확장 속도가 다소 느림.
  * **장점:** 시간이 걸릴 뿐 최종적인 확장성 자체는 우수함.

* **Fargate:**
  * **특징:** 도커 컨테이너 기반으로 EC2보다 빠르게 부팅 및 확장됨.

* **Lambda:**
  * **제한:** 리전당 기본 **1,000개**의 동시 실행(Concurrent Executions) 제한 (소프트 제한).

---

### 3. 데이터베이스 및 스토리지 계층 (Database & Storage)

데이터 계층은 가장 병목 현상이 자주 발생하는 구간입니다.

| 서비스 | 성능 및 제한 사항 | 비고 |
| --- | --- | --- |
| **RDS / Aurora** | 프로비저닝된 용량에 의존 | Aurora 외에는 빠른 확장이 어려움 |
| **DynamoDB** | 자동 확장(Auto Scaling) 및 온디맨드 모드 지원 | 대규모 읽기/쓰기에 최적화 |
| **ElastiCache (Redis)** | 최대 **200개** 노드까지 확장 가능 | 고성능 캐싱 |
| **ElastiCache (Memcached)** | 샤딩을 통해 최대 **20개** 노드 지원 | 단순 키-값 캐싱 |
| **DAX** | 기본+복제 노드 포함 최대 **10개** 노드 | DynamoDB 전용 가속기 |

#### 디스크 성능 (EBS & Instance Store)

* **EBS gp2:** 최대 **16,000 IOPS**
* **EBS io1:** 최대 **64,000 IOPS**
* **Instance Store:** **수백만 IOPS** 가능 (휘발성이지만 로컬 캐시로 매우 유용)
* **EFS:** 파일 공유용. 성능이 필요할 경우 **Max I/O** 또는 **Provisioned I/O** 모드 선택.

---

### 4. 애플리케이션 통합 및 데이터 스트림 (Integration)

애플리케이션 간 결합도를 낮추고 대량의 데이터를 수집할 때 사용합니다.

* **SNS / SQS (Standard):** 사실상 무한 확장.
* **SQS FIFO:** 
  * 배치(Batch) 미사용 시: 초당 **300개** 요청.
  * 배치 사용 시: 초당 **3,000개** 요청.


* **Kinesis Data Streams:** 
  * 샤드(Shard) 단위 프로비저닝 필요.
  * 샤드당 입력: **1MB/s** | 출력: **2MB/s**.



---

### 5. S3 및 보안 제한 (S3 & KMS)

* **S3 성능:** 접두사(Prefix)당 초당 **GET 5,500회**, **PUT 3,500회** 지원.
* **KMS 제한:** S3 데이터를 SSE-KMS로 암호화할 경우, KMS API 호출 제한(리전별 약 **10,000 TPS**)이 S3 전체 성능의 발목을 잡을 수 있음.

---

## 💡 아키텍처 설계 핵심 요약

> **"왼쪽(Edge)으로 갈수록 이득이다"**

1. **비용 절감:** 아키텍처의 오른쪽(DB, 복잡한 연산)으로 갈수록 비용이 비싸집니다. 왼쪽(CloudFront, 캐싱)에서 해결할수록 저렴합니다.
2. **지연 시간(Latency):** 요청이 우측으로 깊숙이 들어올수록 거치는 단계가 많아져 응답 속도가 느려집니다.
3. **캐싱의 중요성:** TTL(Time To Live)을 적절히 설정하고, 엣지 계층에서 데이터를 반환하여 백엔드 컴퓨팅과 DB의 부하를 최소화해야 합니다.
