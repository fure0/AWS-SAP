## 1. 네트워크 기초: CIDR 및 IP 주소

### **CIDR (Classless Inter-Domain Routing)**

* **정의:** IP 주소의 범위를 지정하는 방식 (예: `192.168.0.0/26`은 64개의 IP 주소 의미).
* **중요성:** VPC, 서브넷, 보안 그룹, 라우트 테이블 등 AWS 네트워크 전반에서 사용됩니다.

### **사설(Private) vs 공인(Public) IP**

* **사설 IP 범위 (RFC 1918 표준):**
  * `10.0.0.0 - 10.255.255.255` (/8 대규모)
  * `172.16.0.0 - 172.31.255.255` (/12 중규모)
  * `192.168.0.0 - 192.168.255.255` (/16 소규모/가정용)

* **공인 IP:** 사설 IP 범위를 제외한 전 세계에서 고유한 주소입니다.

---

## 2. VPC(Virtual Private Cloud) 구성 요소

### **VPC 기본**

* **CIDR 설정:** 생성 시 CIDR 블록을 정의하며, 최소 크기는 `/28`, 최대 크기는 `/16`(65,536개 IP)입니다.
* **성격:** 기본적으로 비공개(Private) 네트워크입니다.

### **서브넷 (Subnet)**

* VPC CIDR의 하위 집합입니다.
* **예약 IP:** 각 서브넷의 **처음 4개와 마지막 1개 IP**는 AWS가 네트워킹 목적으로 예약하여 사용할 수 없습니다.

### **라우트 테이블 (Route Table)**

* 트래픽이 어디로 향할지 결정하는 이정표 역할을 합니다.
* **가장 구체적인 규칙(Most Specific Route) 우선:** CIDR 마스크가 길수록(슬래시 숫자가 높을수록) 우선순위가 높습니다.

---

## 3. 인터넷 연결 및 NAT 솔루션

### **인터넷 게이트웨이 (IGW)**

* VPC와 인터넷을 연결하는 관문입니다.
* 고가용성 및 수평적 확장이 가능하며, 공인 IP 인스턴스를 위해 NAT 역할을 수행합니다.

### **공인 vs 사설 서브넷**

* **공인 서브넷 (Public):** 라우트 테이블에 `0.0.0.0/0` -> `IGW` 규칙이 있고, 인스턴스가 공인 IP를 가짐.
* **사설 서브넷 (Private):** 외부에서 직접 접속 불가. 인터넷이 필요하면 NAT를 통해 나감.

### **NAT(Network Address Translation) 비교**

| 구분 | NAT 인스턴스 (EC2 기반) | NAT 게이트웨이 (관리형) |
| --- | --- | --- |
| **관리** | 사용자가 직접 관리 (패치, 장애조치 등) | AWS가 관리 (고가용성) |
| **성능** | 인스턴스 타입에 따라 제한됨 | 대역폭 자동 확장 |
| **설정** | **Source/Dest. Check 비활성화** 필수 | 별도 설정 불필요 |
| **비용** | 비교적 저렴함 | 관리 비용 발생 |
| **권장사항** | 단일 AZ 장애에 취약 | **AZ별로 각각 배치**하여 고가용성 확보 |

---

## 4. 보안: NACL vs 보안 그룹 (Security Group)

| 특징 | 네트워크 ACL (NACL) | 보안 그룹 (Security Group) |
| --- | --- | --- |
| **적용 수준** | 서브넷 수준 | 인스턴스(ENI) 수준 |
| **상태 유지** | **Stateless** (나가는 규칙도 써줘야 함) | **Stateful** (들어오면 나가는 건 자동 허용) |
| **규칙 종류** | 허용(Allow) 및 **거부(Deny)** 규칙 지원 | **허용(Allow)** 규칙만 지원 |
| **평가 순서** | 번호 순서대로 우선순위 평가 | 모든 규칙을 평가한 뒤 허용 |

---

## 5. 모니터링 및 액세스

* **VPC 플로우 로그 (Flow Logs):** VPC/서브넷/ENI 수준에서 트래픽을 캡처하여 CloudWatch나 S3로 전송. 네트워크 트래픽 분석 및 보안 공격 감지에 유용합니다.
* **배스천 호스트 (Bastion Host):** 사설 서브넷 인스턴스에 SSH 접속을 하기 위한 공인 서브넷의 중계 서버입니다. 직접 관리가 필요합니다.
* **SSM 세션 관리자:** 배스천 호스트 없이도 보안상 더 안전하게 인스턴스를 원격 제어할 수 있는 최신 방식입니다.

---

## 6. IPv6 (Next Generation IP)

* **특징:** 모든 IPv6 주소는 **공인(Public)** 주소입니다. (43억 개의 한계가 있는 IPv4와 달리 거의 무한대)
* **표현:** `::/0`은 IPv4의 `0.0.0.0/0`(모든 트래픽)과 같습니다.
* **이그레스 전용 인터넷 게이트웨이 (Egress-only IGW):**
  * 사설 서브넷의 인스턴스가 IPv6를 통해 인터넷으로 **나갈 수는 있지만**, 외부에서 IPv6로 **들어오는 것은 차단**하는 역할입니다. (NAT 게이트웨이의 IPv6 버전 역할)
