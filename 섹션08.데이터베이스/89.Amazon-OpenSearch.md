## 1. Amazon OpenSearch 개요

과거 **Elasticsearch**로 불리던 서비스가 라이선스 변경 이슈로 인해 AWS에서 포크(Fork)하여 만든 오픈 소스 프로젝트가 바로 **OpenSearch**입니다.

* **명칭 변경:** Elasticsearch → **OpenSearch**
* **시각화 도구:** Kibana → **OpenSearch Dashboards**
* **서비스 성격:** 검색 및 분석을 위한 관리형 서비스

### 운영 모드

1. **관리형 클러스터 (Managed Cluster):** 인스턴스 유형, 개수 등을 사용자가 직접 정의.
2. **서버리스 (Serverless):** 인프라 관리 없이 데이터 사용량에 따라 자동으로 확장.

---

## 2. 주요 구성 요소 및 사용 사례

OpenSearch는 주로 **ELK(Elasticsearch, Logstash, Kibana)** 스택의 대안으로 사용됩니다.

| 구성 요소 | 역할 | 비고 |
| --- | --- | --- |
| **OpenSearch** | 데이터 검색 및 인덱싱 | 핵심 엔진 |
| **OpenSearch Dashboards** | 실시간 데이터 시각화 | CloudWatch Dashboards보다 고도화된 기능 제공 |
| **Logstash** | 로그 수집 및 변환 | Logstash 에이전트를 통해 데이터 수집 |

* **주요 사용 사례:** 로그 분석, 실시간 애플리케이션 모니터링, 보안 분석, 전체 텍스트 검색(Full-text Search), 클릭스트림 분석 등.

---

## 3. 아키텍처 패턴 (중요)

시험에서 자주 등장하는 OpenSearch 통합 패턴들입니다.

### A. DynamoDB와 통합 (검색 기능 강화)

DynamoDB는 키-값 기반의 빠른 읽기/쓰기에는 강하지만, 복잡한 검색(전체 텍스트 검색 등)에는 한계가 있습니다. 이를 해결하기 위해 두 서비스를 조합합니다.

1. **변경 데이터 캡처:** DynamoDB의 삽입/수정/삭제 이벤트가 **DynamoDB Streams**에 기록됩니다.
2. **데이터 전송:**
   * **방법 1:** Lambda가 스트림을 읽어 OpenSearch로 전송.
   * **방법 2 (최신):** DynamoDB → Kinesis Data Streams → Kinesis Data Firehose → OpenSearch 순으로 연결.

3. **검색 프로세스:** 사용자가 EC2 기반 API를 통해 OpenSearch에서 항목을 검색(Index Search)하고, 상세 데이터는 DynamoDB에서 직접 가져오는 방식을 사용합니다.

### B. CloudWatch Logs와 통합 (로그 분석)

CloudWatch의 로그를 더 정밀하게 분석하고 시각화하기 위해 OpenSearch로 보냅니다.

* **실시간 처리 (Lambda):**
`CloudWatch Logs` → `Subscription Filter` → `Lambda` → `OpenSearch`
* **배치/준실시간 처리 (Firehose):**
`CloudWatch Logs` → `Subscription Filter` → `Kinesis Data Firehose` → `OpenSearch`
> **참고:** Firehose는 데이터를 모아서 보내는 배칭(Batching) 기능이 있어 비용 효율적일 수 있으나 '거의 실시간(Near-Real-time)'으로 작동합니다.



---

## 4. 요약 및 시험 포인트

* **Elasticsearch**라는 용어가 나오면 **OpenSearch**와 동일하게 간주하세요.
* **CloudWatch Logs**의 보존 기간이나 세분화된 분석이 고민이라면 **Logstash + OpenSearch** 조합이 대안이 됩니다.
* **DynamoDB**의 검색 성능을 확장해야 한다면 **DynamoDB Streams + Lambda + OpenSearch** 패턴을 선택하세요.
