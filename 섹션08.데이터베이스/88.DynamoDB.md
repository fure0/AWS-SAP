## 1. DynamoDB 기본 개념

* **특징**: NoSQL 데이터베이스, 완전 관리형, 서버리스, 초당 수백만 요청 처리 가능.
* **아키텍처**: Apache Cassandra와 유사하며, 기존 Cassandra 사용자는 마이그레이션이 용이함.
* **데이터 크기 제한**: 개별 항목(Item)의 최대 크기는 **400KB**.
* *Tip: 400KB를 초과하는 대용량 객체는 **S3에 저장**하고, DynamoDB에는 **S3 객체의 참조(Link)**만 저장하는 아키텍처를 권장함.*



### 용량 모드 (Capacity Modes)

| 모드 | 특징 | 적합한 경우 |
| --- | --- | --- |
| **프로비저닝 (Provisioned)** | RCU/WCU를 수동 설정하거나 오토 스케일링 적용 | 워크로드가 예측 가능하며 비용 효율성을 중시할 때 |
| **온디맨드 (On-Demand)** | 읽기/쓰기 요청당 비용 지불 | 워크로드를 예측할 수 없거나 개발 초기 단계일 때 |

---

## 2. 데이터 구조 및 기본 키 (Primary Key)

* **구성**: 테이블(Table) > 항목(Item, 행) > 속성(Attribute, 열).
* **데이터 타입**:
* 스칼라(String, Number, Binary, Boolean, Null)
* 문서(List, Map)
* 집합(String Set, Number Set, Binary Set)



### 기본 키 옵션

1. **파티션 키 (Partition Key - HASH)**:
* 단일 키로 구성. 고유(Unique)해야 하며 데이터 분산을 위해 다양한 값을 가져야 함 (예: `user_id`).


2. **복합 키 (Composite Key - HASH + RANGE)**:
* **파티션 키(PK) + 정렬 키(Sort Key, SK)**의 조합.
* 동일한 PK 내에서 SK가 다르면 여러 항목 저장 가능 (예: `user_id` + `game_id` 또는 `timestamp`).



---

## 3. 인덱스 (Secondary Indexes)

DynamoDB는 기본 키 외의 속성으로 쿼리하기 위해 반드시 인덱스가 필요합니다.

| 구분 | 로컬 보조 인덱스 (LSI) | 글로벌 보조 인덱스 (GSI) |
| --- | --- | --- |
| **파티션 키** | 기존 테이블과 **동일**해야 함 | 기존과 **다른 키**로 변경 가능 |
| **정렬 키** | 다른 속성으로 변경 가능 | 변경 가능 (선택 사항) |
| **생성 시점** | **테이블 생성 시에만** 정의 가능 | 언제든지 생성/삭제 가능 |

---

## 4. 고급 기능 및 통합 아키텍처

### TTL (Time To Live)

* 특정 시간이 지나면 항목을 자동으로 삭제하여 저장 비용 절감 및 데이터 관리 자동화.

### DynamoDB Streams

* 테이블의 데이터 변경 사항(생성, 수정, 삭제)을 실시간으로 감지 (24시간 보관).
* **주요 아키텍처**: `DynamoDB -> Stream -> Lambda -> (OpenSearch / Kinesis / S3)`
* **Kinesis Data Streams 통합**: 24시간 이상의 데이터 보존(최대 365일)이나 복잡한 실시간 분석이 필요할 때 사용.

### 글로벌 테이블 (Global Tables)

* 여러 리전에 걸쳐 데이터를 **다중 활성(Active-Active) 복제**.
* 지연 시간 최소화 및 재해 복구(DR)에 탁월 (매우 낮은 RTO 제공).

---

## 5. 솔루션 아키텍처 활용 예시

### S3 메타데이터 인덱싱

* **문제**: S3는 객체 검색 및 필터링 기능이 약함.
* **해결**: S3에 파일 업로드 시 Lambda를 트리거하여 파일명, 크기, 소유자 등의 메타데이터를 DynamoDB에 저장.
* **결과**: DynamoDB의 GSI/LSI를 통해 S3 데이터를 날짜별, 사용자별로 빠르게 쿼리 가능.

---

## 6. 캐싱 전략: DAX vs ElastiCache

### DAX (DynamoDB Accelerator)

* DynamoDB 전용 인메모리 캐시 (마이크로초 지연 시간).
* **Write-through** 방식: 애플리케이션 코드를 크게 수정할 필요 없음.
* **해결 문제**: 특정 데이터에 접근이 몰리는 **핫키(Hot Key) 스로틀링** 방지.
* **구성**: 최소 3개 노드 권장(Production), 최대 10개.

### ElastiCache (Redis/Memcached)

* **사용 시점**: 단순 쿼리 결과 캐싱이 아니라, **복잡한 계산/집계 결과**를 저장해야 할 때.
* **차이점**: DAX는 개별 객체 및 쿼리 자체를 캐싱하고, ElastiCache는 애플리케이션에서 가공된 데이터를 저장하는 용도로 주로 쓰임.
