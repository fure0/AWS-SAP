# ☁️ Amazon Aurora 핵심 요약 정리

## 1. Aurora 기본 개념 및 특징

Aurora는 클라우드 네이티브 환경에 최적화된 관계형 데이터베이스로, 표준 MySQL 및 PostgreSQL과 호환됩니다.

* **스토리지 자동 확장:** 10GB 단위로 시작하여 **최대 128TB**까지 자동으로 확장됩니다. 사용자가 용량을 미리 산정할 필요가 없습니다.
* **고가용성 복제:** 3개의 가용 영역(AZ)에 걸쳐 **6개의 데이터 사본**을 생성합니다.
* **자가 복구(Self-healing):** 데이터 손상 시 P2P 복제를 통해 자동으로 블록을 복구하며, 단일 장애점(SPOF)이 없습니다.
* **S3 통합:** 별도의 클라이언트 앱 없이 Aurora에서 직접 S3로 데이터를 로드하거나 내보낼 수 있어 네트워크 비용과 리소스를 절약합니다.

---

## 2. 아키텍처 및 복제 메커니즘

### 데이터 쓰기 및 읽기 쿼럼

* **쓰기(Write):** 6개 사본 중 4개의 응답이 필요합니다.
* **읽기(Read):** 6개 사본 중 3개의 응답이 필요합니다.

### 복제본 및 장애 조치(Failover)

* **최대 15개의 읽기 전용 복제본(Replica)** 생성이 가능합니다.
* **장애 조치 속도:** 마스터(Writer) 장애 시 약 **30초 이내**에 복제본이 마스터로 승격됩니다. (RDS보다 빠름)
* **글로벌 복제:** 리전 간 읽기 전용 복제본을 지원하여 재해 복구(DR) 시나리오에 활용 가능합니다. (단, 테이블 단위가 아닌 **전체 DB 단위 복제**)

---

## 3. 네 가지 엔드포인트 유형

Aurora는 클라이언트가 DB에 접속하는 방식을 최적화하기 위해 다양한 엔드포인트를 제공합니다.

| 엔드포인트 유형 | 용도 및 특징 |
| --- | --- |
| **클러스터 (Writer)** | 기본 DB 인스턴스에 연결. 삽입, 업데이트, 삭제 등 모든 쓰기 작업에 사용. |
| **리더 (Reader)** | 사용 가능한 모든 복제본에 대해 **로드 밸런싱** 제공. 읽기 전용(Select) 쿼리에 사용. |
| **사용자 지정 (Custom)** | 사용자가 정의한 특정 인스턴스 집합에 연결. (예: 고성능 인스턴스군에만 분석 쿼리 할당) |
| **인스턴스 (Instance)** | 특정 개별 DB 인스턴스에 직접 연결. 미세 조정 및 진단 시 사용. |

---

## 4. 모니터링 및 성능 최적화 도구

문제 해결을 위해 다음과 같은 로그와 도구를 활용합니다.

### 로그 관리

* **제공 로그:** 오류 로그, 느린 쿼리 로그(Slow Query), 일반 로그, 감사 로그.
* **활용:** CloudWatch Logs로 게시하여 실시간 스트리밍 확인이나 오프라인 분석이 가능합니다.

### 성능 분석 도구

* **성능 개선 도우미(Performance Insights):**
* 대기 시간, SQL 문, 호스트, 사용자별로 부하의 원인을 시각화합니다.
* 어떤 쿼리가 DB에 과부하를 주는지 실시간으로 파악할 수 있습니다.


* **CloudWatch 지표:** 기본적으로 CPU, 메모리, 스왑 사용량을 모니터링합니다.
* **향상된 모니터링(Enhanced Monitoring):** **초 단위 지표**와 호스트 수준의 정보를 제공합니다. (예: 실행 중인 상위 100개 프로세스 확인)

---

## 💡 DynamoDB와의 주요 차이점 (시험 포인트)

* **호환성:** Aurora는 SQL(MySQL/PostgreSQL) 기반이지만, DynamoDB는 NoSQL입니다.
* **복제 단위:** 리전 간 복제 시 DynamoDB는 특정 테이블을 선택할 수 있지만, **Aurora는 전체 데이터베이스가 복사**됩니다.
