## ## Amazon S3 멀티리전 액세스 포인트 (MRAP) 정리

### 1. 주요 개념 및 특징

S3 멀티리전 액세스 포인트는 여러 AWS 리전에 분산된 S3 버킷들을 하나의 **글로벌 엔드포인트**로 묶어 관리할 수 있게 해주는 기능입니다.

* **단일 엔드포인트:** 전 세계 어디서든 하나의 호스트 이름을 통해 액세스합니다.
* **동적 라우팅:** 사용자의 요청을 **지연 시간(Latency)이 가장 낮은** 리전의 버킷으로 자동 리디렉션합니다.
* **성능 최적화:** AWS 글로벌 네트워크를 사용하여 공용 인터넷을 거치는 구간을 최소화하고 성능을 향상시킵니다.

---

### 2. 데이터 동기화 및 복제 (Replication)

모든 리전에서 동일한 데이터를 유지하기 위해 다음과 같은 메커니즘을 사용합니다.

* **양방향 복제 (Bi-directional Replication):** 한 버킷에 데이터가 쓰여지면 다른 리전의 버킷으로 자동 복제되어 모든 리전이 동기화됩니다.
* **자동 규칙 생성:** S3 MRAP 설정 시 리전 간 복제 규칙을 Amazon S3가 자동으로 생성하여 관리 편의성을 높입니다.

---

### 3. 페일오버 제어 (Failover Controls)

리전 정전이나 장애 상황에 대비하여 트래픽 흐름을 제어할 수 있습니다.

| 구성 방식 | 설명 |
| --- | --- |
| **액티브-액티브 (Active-Active)** | 모든 리전이 활성화 상태이며, 지연 시간이 가장 짧은 곳으로 트래픽을 분산합니다. 여러 리전에 동시에 쓰기가 가능합니다. |
| **액티브-패시브 (Active-Passive)** | 특정 리전(Active)만 트래픽을 처리하고, 장애 발생 시 대기 중인 리전(Passive)으로 수동 또는 자동으로 페일오버합니다. |

* **동작 방식 예시:**
1. `us-east-1`을 **Active**, `eu-west-1`을 **Passive**로 설정.
2. 평상시에는 지연 시간과 상관없이 Active 버킷으로만 요청이 전송됨.
3. `us-east-1`에 심각한 장애 발생 시, 페일오버를 통해 요청을 Passive 버킷으로 리디렉션.



---

### 4. 아키텍처 예시 (3개 리전 구성)

* **대상 리전:** `us-east-1`, `eu-west-1`, `ap-southeast-1`
* **동작 흐름:**
1. 애플리케이션이 MRAP 글로벌 엔드포인트로 객체 요청.
2. AWS가 가장 가까운(Low Latency) 리전을 판단하여 연결.
3. 만약 특정 리전이 다운되면, 자동으로 정상 작동 중인 다른 리전으로 요청을 전달하여 비즈니스 연속성 보장.



---

> **핵심 요약:** S3 멀티리전 액세스 포인트는 **글로벌 서비스의 가용성**을 높이고 **사용자 경험(지연 시간 단축)**을 개선하며, **복잡한 리전 간 복제와 페일오버**를 단순하게 관리할 수 있게 해주는 강력한 도구입니다.
