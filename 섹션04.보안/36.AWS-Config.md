# ☁️ AWS Config 핵심 정리

AWS Config는 AWS 리소스의 **설정 상태를 기록, 감사 및 평가**하는 서비스입니다. 리소스의 변경 이력을 추적하고, 정의한 규칙에 따라 컴플라이언스(준수 여부)를 관리하는 데 특화되어 있습니다.

---

## 1. AWS Config의 핵심 특성

* **설정 기록 및 변경 추적:** 리소스 설정이 시간에 따라 어떻게 변했는지 기록합니다.
* **컴플라이언스 평가:** 리소스가 특정 규정(규칙)을 준수하는지 확인합니다.
* **비차단적(Non-preventative) 성격:** * 중요: Config 규칙은 규정을 어기는 **액션 자체를 막지는 않습니다.** (예: SSH 포트를 여는 행위를 차단하지 않음)
* 차단이 목적이라면 **SCP(Service Control Policies)**나 IAM 정책을 사용해야 합니다.
* Config는 위반 사항을 **감지**하고 알림을 보내거나 조치를 취하도록 돕는 역할입니다.



---

## 2. 주요 기능 및 활용 사례

### 🔍 답변 가능한 질문들

* "내 보안 그룹에 0.0.0.0/0(무제한) SSH 액세스가 허용되어 있는가?"
* "S3 버킷 중 퍼블릭 액세스가 허용된 것이 있는가?"
* "과거 특정 시점에 ALB(Application Load Balancer)의 설정은 어떠했는가?"

### 🛠️ 주요 기능

* **SNS 알림:** 설정 변경이나 규정 미준수 발생 시 관리자에게 즉시 알림을 보냅니다.
* **CloudTrail 통합:** 특정 변경이 발생했을 때, **'누가(Who)'** 해당 API를 호출했는지 연동하여 확인할 수 있습니다.
* **중앙 집중화 (Multi-Account/Region):**
* Config는 **리전별 서비스**입니다. (모든 리전에 활성화 필요)
* 단, **구성 항목 집계(Aggregator)** 기능을 통해 여러 계정과 리전의 데이터를 하나의 중앙 보안 계정으로 통합 관리할 수 있습니다.



---

## 3. Config 규칙 (Rules)

리소스의 '정상 상태'를 정의하는 규칙은 두 가지 방식으로 생성할 수 있습니다.

| 구분 | 설명 | 예시 |
| --- | --- | --- |
| **관리형 규칙 (Managed)** | AWS가 미리 정의한 75개 이상의 규칙 | S3 퍼블릭 읽기 금지, EBS 암호화 확인 등 |
| **사용자 지정 규칙 (Custom)** | **AWS Lambda**를 사용하여 직접 로직을 작성 | 특정 인스턴스 타입(t2.micro)만 허용 등 |

### 평가 트리거 방식

1. **변경 시 평가:** 리소스 설정이 변경될 때마다 즉시 평가.
2. **주기적 평가:** 일정 시간 간격(예: 24시간마다)으로 전체 리소스를 스캔.

---

## 4. 규정 미준수 시 대응 (Remediation)

Config 규칙이 '비준수(Non-compliant)' 상태를 감지하면 자동화된 조치를 취할 수 있습니다.

* **Amazon EventBridge 활용:** 미준수 이벤트를 감지하여 외부 시스템과 통합하거나 후속 작업을 트리거합니다.
* **SSM Automation 연동 (강력 추천):** * **자동 시정(Auto-remediation):** 규정 위반 시 **SSM 자동화 문서**를 실행하여 즉시 문제를 해결합니다.
* 예: 잘못된 보안 그룹 규칙 즉시 삭제, 승인되지 않은 태그를 가진 인스턴스 중지 등.



---

> **Tip:** AWS Config는 "과거에 무슨 일이 있었나?"와 "지금 우리는 규정을 지키고 있나?"를 확인하는 데 있어 보안 및 운영 감사의 핵심 도구입니다.