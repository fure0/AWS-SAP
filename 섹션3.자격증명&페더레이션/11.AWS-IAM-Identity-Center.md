# 🌐 AWS IAM Identity Center (구 AWS Single Sign-On)

AWS IAM Identity Center는 AWS Organizations 내의 모든 계정과 비즈니스 클라우드 애플리케이션에 대해 **단 한 번의 로그인(SSO)**으로 액세스할 수 있게 해주는 서비스입니다.

---

## 1. 주요 특징 및 지원 범위

* **통합 액세스:** AWS 계정뿐만 아니라 Salesforce, Box, Microsoft 365 등 **SAML 2.0** 기반 앱 지원.
* **EC2 Windows 지원:** EC2 Windows 인스턴스에도 싱글 로그인을 제공합니다.
* **중앙 관리:** 다수의 AWS 계정을 운영하는 환경에서 개별 계정마다 로그인 정보를 관리할 필요가 없어 매우 효율적입니다.

---

## 2. 자격 증명 소스 (Identity Sources)

사용자 정보를 어디서 가져올지 선택할 수 있습니다.

| 소스 구분 | 설명 |
| --- | --- |
| **내장 저장소** | Identity Center 자체에서 사용자 및 그룹을 직접 생성 및 관리 |
| **Active Directory (AD)** | 온프레미스 또는 클라우드(AWS Managed AD)와 통합 |
| **External IdP** | Okta, OneLogin 등 제3자 자격 증명 제공자와 연결 |

---

## 3. 작동 원리 및 로그인 흐름

사용자가 전용 로그인 포털에 접속하여 한 번 인증하면, 권한이 부여된 모든 리소스에 접근할 수 있습니다.

1. **로그인 페이지 접속:** 사용자가 고유한 IAM Identity Center 포털 URL로 접속.
2. **인증:** 설정된 자격 증명 저장소(AD, 내장 등)를 통해 사용자 확인.
3. **포털 노출:** 사용자가 접근 가능한 AWS 계정 리스트 및 애플리케이션 아이콘이 표시됨.
4. **콘솔 이동:** 특정 계정 클릭 시, 별도의 패스워드 입력 없이 해당 계정의 IAM 역할을 위임받아 콘솔로 즉시 이동.

---

## 4. 권한 부여 구조 (Permission Sets)

단순히 로그인만 한다고 모든 곳에 접근할 수 있는 것은 아닙니다. **권한 세트(Permission Sets)**를 통해 세밀하게 제어합니다.

### 💡 핵심 메커니즘

* **권한 세트 정의:** IAM 정책(Managed Policy 또는 Custom Policy)의 집합입니다.
* **할당(Assignment):** `사용자/그룹` + `권한 세트` + `대상 계정(OU)`을 서로 연결합니다.
* **자동 역할 생성:** 권한 세트가 특정 계정에 할당되면, 해당 AWS 계정 내에 **IAM Role이 자동으로 생성**됩니다. 사용자가 로그인하면 이 역할을 자동으로 맡게(AssumeRole) 됩니다.

### 예시: 개발자 그룹 권한 관리

* **대상:** 개발자 그룹 (Bob, Alice)
* **연계 1:** 개발(Dev) OU에 대해 'AdministratorAccess' 권한 세트 할당 → Dev 계정의 모든 권한 획득.
* **연계 2:** 운영(Prod) OU에 대해 'ReadOnlyAccess' 권한 세트 할당 → Prod 계정은 조회만 가능.

---

## 5. 고급 기능: ABAC (속성 기반 액세스 제어)

사용자의 속성(Attributes)을 활용하여 권한을 동적으로 제어할 수 있습니다.

* **동작 방식:** 사용자의 코스트 센터(Cost Center), 직급(Senior/Junior), 지역(Locale) 등의 태그 정보를 기반으로 권한을 결정합니다.
* **장점:** 권한 세트를 매번 수정할 필요 없이, 사용자의 속성값만 변경하면 AWS 액세스 권한이 자동으로 업데이트되어 관리가 매우 유연해집니다.
