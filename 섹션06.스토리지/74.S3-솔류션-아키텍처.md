## 1. 정적 객체 제공을 위한 4가지 아키텍처 모델

정적 객체(이미지, HTML, 영상 등)를 클라이언트에게 제공하는 방법은 서비스 규모와 요구사항에 따라 달라집니다.

| 모델 | 구성 요소 | 장점 | 단점 및 특징 |
| --- | --- | --- | --- |
| **기본형** | EC2 + EBS/Instance Store | 설정이 간단함 | 확장성 및 가용성 부족 |
| **캐싱 도입** | CloudFront + EC2 | 글로벌 엣지 네트워크를 통한 빠른 응답속도 | EC2 장애 시 엣지 캐시가 없으면 서비스 불가 |
| **고가용성** | CloudFront + ALB + ASG (EC2) | 고가용성 보장, EFS를 통한 데이터 공유 | 비용이 비쌈, Linux 환경(POSIX) 위주 |
| **최적화 모델** | **CloudFront + S3** | **가장 권장되는 방식**, 뛰어난 확장성 | 자주 업데이트되지 않는 대용량 객체에 최적 |

---

## 2. S3 데이터 검색 최적화: DynamoDB 인덱싱

S3는 객체 자체에 대한 인덱싱 기능이 없어 특정 조건(날짜, 속성 등)으로 파일을 검색하기 어렵습니다. 이를 해결하기 위해 **이벤트 기반 아키텍처**를 사용합니다.

### [S3 + Lambda + DynamoDB 인덱싱 워크플로우]

1. **S3 쓰기 발생**: 사용자가 S3 버킷에 파일을 업로드합니다.
2. **이벤트 알림 트리거**: S3가 Lambda 함수를 호출합니다.
3. **부분 읽기(Byte Range Gets)**: Lambda가 파일 전체를 읽는 대신 필요한 부분만 읽어 메타데이터를 추출합니다.
4. **DynamoDB 삽입**: 파일 경로, 크기, 업로드 날짜, 사용자 속성 등의 정보를 DynamoDB 테이블에 저장합니다.
5. **검색 API 제공**: 사용자는 DynamoDB 인덱스를 통해 날짜별 검색, 특정 속성 검색 등을 빠르고 효율적으로 수행할 수 있습니다.

---

## 3. 모범 사례: 동적 콘텐츠와 정적 콘텐츠의 분리

성능 최적화와 비용 절감을 위해 웹 애플리케이션의 콘텐츠 성격에 따라 경로를 분리하는 것이 핵심입니다.

### **① 동적 콘텐츠 (Dynamic Content)**

* **경로**: Route 53 → ALB/API Gateway → EC2/Lambda → DynamoDB (Database)
* **특징**: 캐싱을 최소화하여 항상 최신 데이터를 제공합니다.
* **세션 관리**: DynamoDB를 세션 저장소나 인덱스 계층으로 활용하여 부하를 관리합니다.

### **② 정적 콘텐츠 (Static Content)**

* **경로**: CloudFront → Amazon S3
* **특징**: CloudFront 엣지 로케이션에 캐싱하여 S3 부하를 줄이고 성능을 극대화합니다.
* **상호작용**: 정적 콘텐츠(S3)에서 발생한 이벤트가 Lambda를 통해 동적 라우트(DynamoDB)의 인덱스를 업데이트하며 서로 연결될 수 있습니다.

---

## 4. 보안 및 직접 액세스 전략

* **OAI (Origin Access Identity)**: S3 버킷을 비공개로 유지하고 오직 CloudFront를 통해서만 접근하도록 제한할 때 사용합니다.
* **Pre-signed URL (미리 서명된 URL)**: CloudFront를 거치지 않고, 프록시 없이 S3에 직접 파일을 업로드하거나 다운로드해야 하는 성능 위주의 시나리오에서 보안을 유지하며 직접 액세스를 허용할 때 사용합니다.

> **💡 핵심 요약**
> SAP 시험에서는 **"CloudFront + S3"** 조합을 기본으로 하되, **"Lambda + DynamoDB"**를 활용한 인덱싱 구조와 **"동적/정적 콘텐츠의 물리적 분리"**를 설계할 수 있는지를 묻는 문제가 자주 출제됩니다.
