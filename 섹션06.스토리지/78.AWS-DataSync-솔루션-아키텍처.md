## AWS DataSync 프라이빗 연결 아키텍처

온프레미스에서 AWS로 데이터를 전송할 때, 보안 및 규정 준수를 위해 인터넷을 거치지 않고 **Direct Connect(DX)**를 통해 비공개로 연결해야 하는 경우가 있습니다. 이때의 데이터 흐름과 구성 요소를 정리했습니다.

### 1. 연결 방식에 따른 두 가지 옵션

DataSync 에이전트가 AWS 서비스와 통신할 때 선택할 수 있는 경로는 다음과 같습니다.

* **옵션 A: 퍼블릭 VIF(Virtual Interface) 사용**
* **경로:** 에이전트 → Direct Connect → **퍼블릭 인터넷 구간(Public URL)** → DataSync 서비스.
* **특징:** VPC를 우회하여 DataSync의 퍼블릭 엔드포인트에 접속합니다. 보안 정책상 프라이빗 연결이 필수인 경우에는 적합하지 않습니다.
* **보안:** 데이터는 암호화되지만, 서비스의 퍼블릭 URL을 사용합니다.


* **옵션 B: 프라이빗 VIF 및 PrivateLink 사용 (권장)**
* **경로:** 에이전트 → Direct Connect → **프라이빗 VIF** → **VPC 인터페이스 엔드포인트** → DataSync 서비스.
* **특징:** 데이터를 VPC 내부망을 통해 전송하므로, 퍼블릭 인터넷을 전혀 거치지 않는 진정한 비공개 연결이 가능합니다.



---

### 2. 프라이빗 연결 구성 단계 (PrivateLink)

강의에서 설명한 비공개 액세스 프로세스는 다음과 같습니다.

1. **VPC 엔드포인트 생성:** VPC 내부에 DataSync를 위한 **인터페이스 VPC 엔드포인트(AWS PrivateLink)**를 생성합니다.
2. **Direct Connect 설정:** 온프레미스와 VPC 사이를 연결하기 위해 Direct Connect에 **프라이빗 VIF**를 설정합니다.
3. **데이터 전송 흐름:**
* 온프레미스의 DataSync 에이전트가 실행됩니다.
* 데이터가 Direct Connect를 타고 VPC 내부로 들어옵니다.
* VPC 내부의 인터페이스 엔드포인트를 거쳐 최종적으로 AWS DataSync 서비스에 도달합니다.



---

### 3. 핵심 요약 (Key Takeaways)

| 항목 | 퍼블릭 연결 | 프라이빗 연결 (PrivateLink) |
| --- | --- | --- |
| **연결 통로** | 퍼블릭 VIF | 프라이빗 VIF |
| **VPC 거침 여부** | 우회 (Bypass) | **통과 (Via Interface Endpoint)** |
| **주요 서비스** | DataSync Public URL | AWS PrivateLink |
| **보안성** | 낮음 (인터넷 구간 노출) | **높음 (완전 비공개)** |

> **시험 포인트:** "Direct Connect를 사용하면서 보안상 비공개 연결을 유지해야 한다"는 요구사항이 나오면 반드시 **프라이빗 VIF + VPC 인터페이스 엔드포인트** 조합을 떠올려야 합니다.
