## 1. EFS (Elastic File System) 개요

EFS는 AWS에서 제공하는 **관리형 NFS(Network File System)** 서비스입니다.

* **다중 접속:** 수백~수천 개의 EC2 인스턴스가 동시에 마운트하여 사용할 수 있습니다.
* **지역성:** 동일한 리전 내의 여러 가용 영역(AZ)에 걸쳐 있는 인스턴스들에 적합합니다.
* **호환성:** **Linux 기반 AMI**와만 호환됩니다. (Windows는 지원 안 함)
* **프로토콜:** NFSv4.1 프로토콜을 사용하며 POSIX 표준 파일 시스템 인터페이스를 제공합니다.
* **확장성:** 1GB에서 PB 규모까지 자동으로 확장되며, 별도의 용량 계획이 필요 없습니다.

---

## 2. 비용 및 연결성

* **요금 모델:** 사용한 스토리지 용량(GB)당 비용을 지불합니다. (EBS처럼 미리 프로비저닝할 필요 없음)
* **비용 수준:** GP2(EBS) 대비 약 3배 정도 비싸지만, 관리 편의성과 확장성이 뛰어납니다.
* **보안:** **보안 그룹(Security Group)**을 통해 액세스를 제어하며, KMS를 통해 데이터 암호화를 지원합니다.
* **연결 방법:** * **VPC 내부:** 가용 영역당 하나의 **마운트 타겟(ENI)**을 생성하여 접속합니다.
* **온프레미스:** Direct Connect 또는 Site-to-Site VPN을 통해 연결 가능합니다. (단, 온프레미스 마운트 시에는 DNS 대신 **ENI의 IPv4 주소**를 직접 사용해야 함)



---

## 3. 성능 모드 및 처리량 모드

### 성능 모드 (설정 시 선택)

1. **범용 (General Purpose):** 기본값. 웹 서버, CMS 등 지연 시간(Latency)에 민감한 작업용.
2. **최대 I/O (Max I/O):** 지연 시간은 다소 높으나 처리량(Throughput)과 병렬성이 극대화된 모드. 빅데이터 및 미디어 처리용.

### 처리량 모드

1. **버스팅 (Bursting):** 스토리지 크기에 비례하여 처리량이 결정됨.
2. **프로비저닝 (Provisioned):** 스토리지 용량과 무관하게 고정된 처리량 설정 가능.
3. **탄력적 (Elastic):** 워크로드에 따라 자동으로 확장/축소 (예: 읽기 최대 3GiB/s, 쓰기 1GiB/s). 예측 불가능한 워크로드에 최적.

---

## 4. 스토리지 클래스 및 수명 주기

| 클래스 | 특징 |
| --- | --- |
| **Standard** | 자주 액세스하는 데이터용 (기본 티어) |
| **Infrequent Access (IA)** | 자주 사용하지 않는 데이터용. 저장 비용은 저렴하나 검색 시 비용 발생. |
| **Archive** | 1년에 몇 번만 액세스하는 장기 보관 데이터용. 가장 저렴. |

* **수명 주기 정책(Lifecycle Management):** 일정 기간(예: 60일) 동안 액세스하지 않은 파일을 자동으로 저렴한 티어(IA 또는 Archive)로 이동시켜 최대 90%의 비용을 절감할 수 있습니다.
* **가용성 옵션:**
* **Standard:** Multi-AZ 배포. 프로덕션 환경 및 재해 복구에 적합.
* **One Zone:** 단일 AZ 배포. 개발 환경 및 저비용 목적. (IA와 혼합 사용 가능)



---

## 5. 보안 및 고급 기능

### EFS 액세스 포인트 (Access Points)

애플리케이션별로 NFS 환경에 대한 보안 및 액세스를 관리하는 기능입니다.

* 특정 **POSIX UID/GID**를 강제하여 사용자 권한을 제어합니다.
* 파일 시스템 내의 **특정 디렉터리**만 루트 디렉터리로 지정하여 접근 범위를 제한할 수 있습니다.
* IAM 정책과 결합하여 세밀한 권한 제어가 가능합니다.

### 리소스 기반 정책 (File System Policy)

* S3 버킷 정책처럼 EFS 자체에 정책을 부여합니다.
* 특정 사용자에게 '읽기/쓰기' 권한만 부여하거나, 암호화된 연결(SecureTransport)을 강제할 수 있습니다.

### 교차 리전 복제 (Cross-Region Replication)

* 기존 및 신규 파일 시스템 모두 지원합니다.
* 다른 리전으로 데이터를 복제하여 비즈니스 연속성(BCP) 및 컴플라이언스를 충족합니다.
* 백엔드에서 수행되므로 성능(Throughput)에 영향을 주지 않으며, 분 단위의 RPO/RTO를 제공합니다.
